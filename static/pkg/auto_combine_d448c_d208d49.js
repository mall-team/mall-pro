define("common/copyright/index",function(require,exports,module){function render(){if(!($("#copyright").length>0||$(".copyright").length>0)){var t=$body.attr("no-copyright");1!=t&&($body.append($(_tmpl())),$copyright=$("#copyright"),reset())}}function reset(){var t=$body.height(),o=$win.height();o>t+HEI?($body.css({"min-height":o+"px",position:"relative"}),$copyright.css({position:"absolute",width:"100%",bottom:$body.css("padding-bottom")})):$copyright.css({position:"static",width:"auto"})}var $copyright,$=require("zepto"),_tmpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div id="copyright">一惠到家&nbsp;提供技术支持</div>';return __p},HEI=64,$body=$(document.body),$win=$(window);module.exports={render:render,reset:reset}});
;define("common/pop/index",function(require,exports,module){function _init(){$pop||($(document.body).append(_tmpl()),$pop=$("#J-pop"),$mask=$pop.find(".mask"),$container=$pop.find(".container"),$title=$pop.find(".title"),$content=$pop.find(".content"),$close=$pop.find(".close")),$mask.add($close).on("click",function(){curOptions.manualClose!==!1&&hide()})}function show(o){curOptions=o,winScrollY=o.autoY?window.scrollY:0,$content.html($(o.content)),$("input").on("focus",inputFocus),o.hasClose===!1?$close.css("display","none"):$close.css("display","block"),o.title?$title.text(o.title).css("display","block"):$title.css("display","none"),o.scroll?$pop.css("position","fixed"):($pop.css("position","absolute"),$("html").attr("style","position: relative; overflow: hidden; height: "+winHei+"px;"),$("body").attr("style","overflow: hidden; height: "+winHei+"px; padding: 0px;")),$pop.css("display","block"),$container.animate({translateY:"0"},500,"ease-out")}function hide(o){$container.animate({translateY:"100%"},500,"ease-in",function(){$("html").attr("style",""),$("body").attr("style",""),$pop.css("display","none"),!curOptions.scroll&&winScrollY&&window.scroll(0,winScrollY),o&&o()})}function inputFocus(){function o(){$(window).off("resize",o)}$(this);$(window).on("resize",o)}var curOptions,$pop,$mask,$container,$content,$=require("zepto"),_tmpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div id="J-pop" class="pop">\r\n	<div class="mask"></div>\r\n	<div class="container">\r\n		<div class="close"></div>\r\n		<div class="title"></div>\r\n		<div class="content"></div>\r\n	</div>\r\n</div>';return __p},winHei=$(window).height(),winScrollY=0;_init(),module.exports={show:show,hide:hide}});
;define("common/bubble/bubble",function(require,exports,module){function show(e,t){$b||($(document.body).append(_tmpl),$b=$("#J-bubble"),$content=$b.find(".bubble-content")),$content.text(e),$b.css("display","block").animate({opacity:1}),timer&&clearTimeout(timer),timer=setTimeout(function(){hide(),timer=null},t||2e3)}function hide(){$b.animate({opacity:0},function(){$b.css("display","none")})}var timer,$b,$content,$=require("zepto"),_tmpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div id="J-bubble" class="bubble">\r\n	<div class="mask"></div>\r\n	<div class="bubble-content"></div>\r\n</div>';return __p}();module.exports={show:show,hide:hide}});
;define("common/config/index",function($,n,o){o.exports={cutArr:["华丽的一刀！砍掉了$0元！","好狠的一刀！砍掉了$0元！","帅气的一刀！砍掉了$0元！","猥琐的一刀！砍掉了$0元！","霸气的一刀！砍掉了$0元！","精彩的一刀！砍掉了$0元！","犀利的一刀！砍掉了$0元！","轻轻的一刀！砍掉了$0元！","温柔的一刀！砍掉了$0元！","潇洒的一刀！砍掉了$0元！","漂亮的一刀！砍掉了$0元！"]}});
;define("common/util/index",function(n,t,a){function r(n,t){return n+Math.ceil(Math.random()*t)}function e(n,t){return n+Math.floor(Math.random()*t)}function i(n,t){var a=new RegExp("(^|&)"+n+"=([^&]*)(&|$)","i"),t=t||location.search,r=t.substr(1).match(a);return t&&r?r[2]:""}function o(){function n(n){for(var a in n)if(void 0!==t.style[a])return n[a]}var t=document.createElement("trans"),a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},r={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return{transEvtName:n(a),aniEvtName:n(r)}}function s(n){return"object"==typeof phpdata?void(n&&n(phpdata)):void setTimeout(function(){s(n)},200)}var u={};!function(n){function t(n){if(n=i(n.replace(/ /g,"")),15==n.length)return e(n);if(18==n.length){var t=n.split("");return r(n)&&a(t)?!0:!1}return!1}function a(n){var t=0;"x"==n[17].toLowerCase()&&(n[17]=10);for(var a=0;17>a;a++)t+=o[a]*n[a];return valCodePosition=t%11,n[17]==s[valCodePosition]?!0:!1}function r(n){var t=n.substring(6,10),a=n.substring(10,12),r=n.substring(12,14),e=new Date(t,parseFloat(a)-1,parseFloat(r));return e.getFullYear()!=parseFloat(t)||e.getMonth()!=parseFloat(a)-1||e.getDate()!=parseFloat(r)?!1:!0}function e(n){var t=n.substring(6,8),a=n.substring(8,10),r=n.substring(10,12),e=new Date(t,parseFloat(a)-1,parseFloat(r));return e.getYear()!=parseFloat(t)||e.getMonth()!=parseFloat(a)-1||e.getDate()!=parseFloat(r)?!1:!0}function i(n){return n.replace(/(^\s*)|(\s*$)/g,"")}var o=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],s=[1,0,10,9,8,7,6,5,4,3,2];n.valid=t}(u),a.exports={getParam:i,random:r,random2:e,getAniEndName:o,phpdataReady:s,IdCard:u}});
;define("common/alert/alert",function(require,exports,module){function show(e,t,o,n){$alert?$alert.css("display","block"):($(document.body).append(_tmpl()),$alert=$("#J-alert"),$contentWrap=$("#J-alert-content-wrap"),$content=$("#J-alert-content"),$mask=$("#J-alert-mask"),$close=$("#J-alert-close"),$close.on("click",function(e){hide(),e.preventDefault(),n&&n()})),o&&(addClsName=o,$contentWrap.addClass(o)),winScrollY=window.scrollY,htmlStyle=$html.attr("style"),bodyStyle=$body.attr("style"),$html.attr("style","position: relative; overflow: hidden; height: "+winHei+"px;"),$body.attr("style","overflow: hidden; height: "+winHei+"px; padding: 0px;"),"string"!=typeof e||/<.*>/.test(e)?$content.html($(e)):(/close=0/.test(e)&&(t=!1),$content.html($(_createIframe(e)))),t===!0||void 0===t?$close.css("display","block"):$close.css("display","none"),_resize(),$win.on("resize",_resize)}function hide(){addClsName&&($contentWrap.removeClass(addClsName),addClsName=void 0),$alert.css("display","none"),$win.off("resize",_resize),$html.attr("style",htmlStyle),$body.attr("style",bodyStyle),window.scroll(0,winScrollY)}function _createIframe(e){var t=document.createElement("iframe");return t.src=e,t.onload=function(){_hasCloseByUrl(t.contentWindow.location.search),t.style.height=t.contentWindow.document.body.offsetHeight+"px",_resize()},t}function _resize(){var e=$win.height(),t=$contentWrap.height();$contentWrap.css("margin-top",(e-t)/2)}function _hasCloseByUrl(e){var t=Util.getParam("close",e);"0"===t?$close.css("display","none"):$close.css("display","block")}var $alert,$mask,$contentWrap,$content,$close,bodyStyle,htmlStyle,addClsName,$=require("zepto"),Util=require("common/util/index"),_tmpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div id="J-alert" class="alert">\r\n	<div id="J-alert-mask" class="mask"></div>\r\n	<div id="J-alert-content-wrap" class="alert-content">\r\n		<i id="J-alert-close" class="icon-close"></i>\r\n		<div id="J-alert-content"></div>\r\n	</div>\r\n</div>';return __p},$win=$(window),$html=$("html"),$body=$(document.body),winHei=$win.height(),winScrollY=0;module.exports={show:show,hide:hide}});
;define("common/confirm-service/index",function(require,exports,module){function validService(e,n,r,o,t){Ajax=r,recommend="",recommendLog={},(new Ajax).send({url:"/WeChat/Band/checkUserRecommend",type:"post",data:{phone:e,code:n}},function(n){var r=n.type;switch(recommendLog.type=r,recommendLog.phone=e,r){case 0:o&&o();break;case 1:selServicePeople(n,function(){recommendLog.userList=n.user,recommendLog.selRecommend=recommend,recordLog(),o&&o(recommend)});break;case 2:showPhoneService(function(){10==recommendLog.type||(recommendLog.selRecommend=recommend),recordLog(),o&&o(recommend)})}},function(){t&&t()})}function recordLog(){(new Ajax).send({url:"/User/Register/selectRecommendLog",type:"post",data:{data:JSON.stringify(recommendLog)}},function(e){console.log(e)})}function selServicePeople(e,n){var r;Alert.show(_selServiceTmpl({userList:e.user}),!1,"service-alert"),r=$(".service-alert-content"),r.find(".J-sel-btn").on("click",function(){Alert.hide(),recommend=$(this).attr("recommend"),n&&n()})}function showPhoneService(e){var n,r,o;Alert.show(_phoneServiceTmpl(),!1,"service-alert"),n=$(".service-alert-content"),r=n.find(".J-phone"),o=n.find(".J-submit"),r.get(0).focus(),r.on("input",function(){var e=r.val().trim();/^1[3-8]\d{9}$/.test(e)?getService(e,function(e){recommendLog.userList=[e],o.removeClass("disabled"),recommend=e.recommend,n.find(".userinfo").html('<div class="head-img" style="background-image:url('+e.headImg+')"></div><div class="user-name">'+e.userName+"</div>")},function(e){o.addClass("disabled"),n.find(".userinfo").html('<p class="err">'+e.msg+"</p>")}):(o.addClass("disabled"),n.find(".userinfo").html(""))}),o.on("click",function(){r.val();return o.hasClass("disabled")?!1:(Alert.hide(),void(e&&e()))}),n.find(".J-self-link").on("click",function(){recommend="",Alert.hide(),recommendLog.type=10,e&&e()})}function getService(e,n,r){(new Ajax).send({url:"/WeChat/Band/getRecommendPhone",data:{phone:e},selfErrorBack:!0},function(e){n&&n(e)},function(e){r&&r(e)})}var Ajax,recommend,recommendLog,$=require("zepto"),Alert=(require("common/bubble/bubble"),require("common/alert/alert")),_selServiceTmpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="service-alert-content">\r\n	',__p+=2==userList.length?'\r\n	<p class="title">请选择一位朋友作为您的推荐人(<b>2选1</b>)</p>\r\n	':'\r\n	<p class="title">请确认您的推荐人</p>\r\n	',__p+='\r\n	<ul class="service-list">\r\n		',$.each(userList,function(e,n){__p+='\r\n		<li>\r\n			<div class="img-wrap headimg" style="background-image:url('+(null==(__t=n.headImg)?"":__t)+')"></div>\r\n			<p class="user-name">'+(null==(__t=n.userName)?"":__t)+'</p>\r\n			<p class="phone-label">'+(null==(__t=n.phone)?"":__t)+'</p>\r\n			<a class="J-sel-btn btnl" recommend="'+(null==(__t=n.recommend)?"":__t)+'">就Ta了</a>\r\n		</li>\r\n		'}),__p+="\r\n	</ul>\r\n</div>";return __p},_phoneServiceTmpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div class="service-alert-content">\r\n	<p class="title">请填写您的推荐人</p>\r\n	<div class="input-wrap phone-wrap">\r\n        <label>手机号</label>\r\n        <input class="J-phone" type="tel" name="phone" placeholder="请输入推荐人手机号码" autocomplete="off">\r\n    </div>\r\n    <div class="userinfo"></div>\r\n    <div class="btn-content">\r\n    	<button type="button" class="J-submit btnl btnl-wx disabled">确认</button>\r\n    </div>\r\n    <div class="link-wrap">\r\n        <a class="J-self-link link">我自己逛来的</a>\r\n    </div>\r\n</div>';return __p};module.exports={start:validService}});
;define("common/login-pop/index",function(require,exports,module){function show(n){Pop.show({content:_tmpl(),hasClose:!1,manualClose:n.manualClose}),init(n)}function init(n){options=n,Ajax=n.Ajax,$yzmBt=$("#J-yzm-bt"),$submitBt=$("#J-phone-ok"),$phone=$("#J-phone"),$code=$("#J-code"),$yzmBt.on("click",getCode),$submitBt.on("click",login)}function getCode(){function n(){setTimeout(function(){return o--,$yzmBt.text(o),0>=o?(disabled=!1,void $yzmBt.text("获取验证码").removeClass("disabled")):void n()},1e3)}if(disabled)return!1;var e=$phone.val(),o=60;return(new Ajax).send({url:"/WeChat/Band/sendMsg",data:{phone:e}},function(){disabled=!0,$yzmBt.text(o).addClass("disabled"),n()}),!1}function login(){function n(){(new Ajax).send({url:"/WeChat/Band/bandAccount",type:"post",data:e},function(){loagining=!1,Pop.hide(),options.loginSuc&&options.loginSuc()},function(){loagining=!1})}var e,o=$phone.val(),t=$code.val();return o?/^\d{11}$/.test(o)?t?loagining?!1:(e={phone:o,code:t},"object"==typeof phpdata&&$.each(["channelType","channelId"],function(n,o){phpdata[o]&&(e[o]=phpdata[o])}),loagining=!0,options.noSelRecommend?n():ConfirmService.start(o,t,Ajax,function(o){o&&(e.recommend=o),n()},function(){loagining=!1}),!1):(Bubble.show("请输入验证码"),!1):(Bubble.show("请输入正确的手机号码"),!1):(Bubble.show("请输入您的手机号码"),!1)}var Ajax,options,$yzmBt,$submitBt,$phone,$code,$=require("zepto"),Pop=require("common/pop/index"),Bubble=require("common/bubble/bubble"),ConfirmService=(require("common/alert/alert"),require("common/confirm-service/index")),_tmpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<section class="phone-panel">\r\n	<div class="input-wrap">\r\n		<label>手机号</label>\r\n		<input id="J-phone" type="tel" placeholder="请输入您的手机号码" />\r\n	</div>\r\n	<div class="yzm">\r\n		<div class="input-wrap">\r\n			<label>验证码</label>\r\n			<input id="J-code" type="tel" placeholder="输入验证码" />\r\n		</div>\r\n		<button style="vertical-align: top;" id="J-yzm-bt" type="button">获取验证码</button>\r\n	</div>\r\n	<div>\r\n		<button id="J-phone-ok" class="btnl btnl-wx">确认</button>\r\n	</div>\r\n</section>';return __p},disabled=!1,loagining=!1;module.exports={show:show,init:init}});
;define("common/ajax/index",function(o,e,t){function a(){}var n=o("zepto"),r=o("common/bubble/bubble"),i=o("common/config/index"),u=o("common/login-pop/index");a.prototype={send:function(o,e,t){var c=this;o||(o={}),"dev"==i.mod?(o.dataType="jsonp",o.type="get",o.url=i.host+o.url):o.dataType=o.dataType||"json",o.url+=o.url.match(/\?[^=]+=.*$/)?"&isAjax=1":"?isAjax=1",o.success=function(n){if(o.selfBack)return void(e&&e(n));var i=n.msg,s=n.url;if(0==n.code){if(e&&e(n.result,n),o.selfSucBack)return}else{if(1e3==n.code)return void u.show({Ajax:a,loginSuc:function(){return o.selfLoginSuc?void o.selfLoginSuc():void c.send(o,e,t)}});if(t&&t(n),o.selfErrorBack)return}i?(r.show(i),s&&setTimeout(function(){location.href=s},2e3)):s&&(location.href=s)},o.error=function(){r.show("啊哦，网络异常啦！检查下网络吧~"),t&&t()},n.ajax(o)}},a.formatAjaxParams=function(o){var e=n(o),t=e.attr("ajax-data"),a={url:e.attr("ajax-url"),type:e.attr("ajax-type")||"get"};return t&&(a.data=JSON.parse(t)),a},t.exports=a});
;define("common/addr-sel/index",function(require,exports,module){function AddrSel(e){this.options=e,this.addr=e.addr||{pro:"",proId:0,city:"",cityId:0,region:"",regionId:0},this._init()}var selType,$=require("zepto"),Ajax=require("common/ajax/index"),Alert=require("common/alert/alert"),_tmpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+="",$.each(list,function(e,t){__p+='\r\n<option value="'+(null==(__t=t.region_id)?"":__t)+'" '+(null==(__t=id==t.region_id&&id>0?'selected="selected"':"")?"":__t)+" >"+(null==(__t=t.region_name)?"":__t)+"</option>\r\n"}),__p+="\r\n";return __p};AddrSel.prototype={_init:function(){var e=this;e.$proBtn=$(e.options.proBtn),e.$cityBtn=$(e.options.cityBtn),e.$regionBtn=$(e.options.regionBtn),e.$proBtn.on("change",function(t){e._proChange(t)}),e.$cityBtn.on("change",function(t){e._cityChange(t)}),e.$regionBtn.on("change",function(t){e._regionChange(t)}),e._getPro(),this.addr.cityId&&e._getCity(),this.addr.regionId&&e._getRegion(),e._onSelect()},_proChange:function(e){var t=this,n=e.currentTarget,i=n.options[n.selectedIndex];t.addr.pro=i.text,t.addr.proId=i.value,t._getCity(function(){t.$regionBtn[0].selectedIndex=0})},_cityChange:function(e){var t=e.currentTarget,n=t.options[t.selectedIndex];this.addr.city=n.text,this.addr.cityId=n.value,this._getRegion()},_regionChange:function(e){var t=e.currentTarget,n=t.options[t.selectedIndex];this.addr.region=n.text,this.addr.regionId=n.value},_getPro:function(){var e=this;(new Ajax).send({url:"/api/UserAddress/getAllProvince"},function(t){var n=t.data;selType="pro",n.unshift({region_id:"-1",region_name:"选择省份"}),e.$proBtn.html($(_tmpl({list:n,id:e.addr[selType+"Id"]})))})},_getCity:function(e){var t=this;(new Ajax).send({url:"/api/UserAddress/getAllCity",data:{province_id:t.addr.proId}},function(n){var i=n.data;selType="city",i.unshift({region_id:"-1",region_name:"选择市区"}),t.$cityBtn.html($(_tmpl({list:i,id:t.addr[selType+"Id"]}))),e&&e()})},_getRegion:function(){var e=this;(new Ajax).send({url:"/api/UserAddress/getAllDistrict",data:{province_id:e.addr.proId,city_id:e.addr.cityId}},function(t){var n=t.data;selType="region",n.unshift({region_id:"-1",region_name:"选择县区"}),e.$regionBtn.html($(_tmpl({list:n,id:e.addr[selType+"Id"]})))})},_onSelect:function(){var e=this;$(document.body).off("click",".addr-selector li"),$(document.body).on("click",".addr-selector li",function(){var t,n,i=$(this);switch(Alert.hide(),t=i.attr("addrId"),n=i.text(),e._setText(selType,n,t),selType){case"pro":e._setText("city","请选择市区",-1),e._setText("region","请选择县区",-1);break;case"city":e._setText("region","请选择县区",-1)}return!1})},_setText:function(e,t,n){var i=this;i.addr[e]=t,i.addr[e+"Id"]=n,i["$"+e+"Btn"].text(t)},_selPro:function(){var e=this;(new Ajax).send({url:"/User/Center/getAllProvince"},function(t){var n=t.data;selType="pro",n.unshift({region_id:"-1",region_name:"选择省份"}),Alert.show(_tmpl({list:n,id:e.addr[selType+"Id"]}))})},_selCity:function(){var e=this;(new Ajax).send({url:"/User/Center/getAllCity",data:{province_id:e.addr.proId}},function(t){var n=t.data;selType="city",n.unshift({region_id:"-1",region_name:"请选择市区"}),Alert.show(_tmpl({list:n,id:e.addr[selType+"Id"]}))})},_selRegion:function(){var e=this;(new Ajax).send({url:"/User/Center/getAllDistrict",data:{city_id:e.addr.cityId}},function(t){var n=t.data;selType="region",n.unshift({region_id:"-1",region_name:"请选择县区"}),Alert.show(_tmpl({list:n,id:e.addr[selType+"Id"]}))})}},module.exports=AddrSel});
;define("common/confirm/index",function(require,exports,module){function show(n){Alert.show(_tmpl({msg:n.msg,type:n.type,okLabel:n.okLabel,noLabel:n.noLabel}),!1),$confirm=$("#J-confirm"),$content=$confirm.find(".confirm-content"),$yes=$confirm.find(".btn-yes"),$no=$confirm.find(".btn-no"),$yes.on("click",function(){hide(),n.yesBack&&n.yesBack()}),$no.on("click",function(){hide(),n.noBack&&n.noBack()})}function hide(){Alert.hide(),$yes.off("click"),$no.off("click")}var $confirm,$content,$yes,$no,$=require("zepto"),Alert=require("common/alert/alert"),_tmpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div id="J-confirm" class="confirm '+(null==(__t="alert"==type?"alert-msg":"")?"":__t)+'">\r\n	<div class="confirm-content">'+(null==(__t=msg)?"":__t)+'</div>\r\n	<div class="confirm-btns">\r\n		<button class="btn-no btnl btnl-default">'+(null==(__t=noLabel||"取消")?"":__t)+'</button>\r\n		<button class="btn-yes btnl">'+(null==(__t=okLabel||"确定")?"":__t)+"</button>\r\n	</div>\r\n</div>";return __p};module.exports={show:show,hide:hide}});
;define("common/address/index",function(require,exports,module){function show(e){curType="pop",selected=e.selected,getList(function(){})}function initPage(e){curType="page",$pageContent=$(e.container),_rendPage()}function _rendPage(){getList(function(){$pageContent.html(listTmpl({list:listData,maxHei:"auto"})),_initNodes()},!1)}function getList(e,t){(new Ajax).send({url:$("#J-ajaxurl-address-list").val(),type:"get"},function(n){listData=n.data||[],(void 0===t||t)&&(0==listData.length?_openDetail():_openList()),e&&e(n.data)},function(){})}function setDefault(e){var t=$(e.currentTarget),n=t.parents("li").attr("addr-id");(new Ajax).send({url:$("#J-ajaxurl-address-setDefault").val(),data:{id:n}},function(){$radios.removeClass("selected"),t.addClass("selected")})}function edit(e){function t(){curItem=_getAddr(i),_openDetail()}var n=$(e.currentTarget),i=n.parents("li").attr("addr-id");"pop"==curType?Pop.hide(function(){t()}):t()}function add(){function e(){curItem={},_openDetail()}"pop"==curType?Pop.hide(function(){e()}):e()}function save(){var e=$editContainer.find(".J-name").val(),t=$editContainer.find(".J-phone").val(),n=curAddr.addr.proId,i=curAddr.addr.cityId,r=curAddr.addr.regionId,a=$editContainer.find(".J-addr").val();return e?e.length>20?(Bubble.show("用户名长度不得超过20位"),!1):t&&/^1[3-8]\d{9}$/.test(t)?n?i?r?a?a.length>100?(Bubble.show("详细地址长度不得超过100位"),!1):((new Ajax).send({url:$("#J-ajaxurl-address-save").val(),type:"post",data:{id:curItem.id,name:e,phone:t,provinceId:n,cityId:i,districtId:r,detailAddr:a}},function(){Pop.hide(function(){"pop"==curType?getList(null,!1):_rendPage()})}),!1):(Bubble.show("请输入你的详细地址"),!1):(Bubble.show("请选择你所在县区"),!1):(Bubble.show("请选择你所在市区"),!1):(Bubble.show("请选择你所在省份"),!1):(Bubble.show("请输入正确手机号码"),!1):(Bubble.show("请输入用户名"),!1)}function del(){Confirm.show({msg:"您确定删除该地址吗？",yesBack:function(){(new Ajax).send({url:$("#J-ajaxurl-address-del").val(),data:{id:curItem.id}},function(){curItem={},Pop.hide(function(){"pop"==curType?getList():_rendPage()})})}})}function _getAddr(e){for(var t,n=0;n<listData.length;n++)if(t=listData[n],t.id==e)return{id:t.id,province_name:t.provinceName,city_name:t.cityName,region_name:t.districtName,province_id:t.provinceId,city_id:t.cityId,district_id:t.districId,recipient_address:t.detailAddr,is_default:t.isDefault,phone:t.rePhone,realName:t.reName,recipient_name:t.reName,recipient_phone:t.rePhone};return{}}function _openList(){Pop.show({title:"选择收货地址",content:listTmpl({list:listData,maxHei:.7*$(window).height()})}),_initNodes()}function _initNodes(){$container=$(".address-container"),$radios=$container.find(".radio"),$addBtn=$container.find(".btn-add"),$container.on("click",".radio",setDefault),$container.on("click",".addr-info",selCurrent),$container.on("click",".edit",edit),$addBtn.on("click",add)}function selCurrent(){var e=$(this).parent().attr("addr-id");"pop"==curType&&Pop.hide(),selected&&selected(_getAddr(e))}function _openDetail(){Pop.show({title:"收货地址",content:editTmpl({item:curItem})}),$editContainer=$(".address-edit"),$saveBtn=$editContainer.find(".J-save"),$delBtn=$editContainer.find(".J-del"),$saveBtn.on("click",save),$delBtn.on("click",del),curItem.province_name,_initAddrSel()}function _initAddrSel(){var e=$("#J-pro-text"),t=$("#J-city-text"),n=$("#J-region-text"),i=($(".J-addr"),$(".address-edit").find(".J-phone")),r=$(".address-edit").find(".J-name");try{curItem.province_name&&"选择省份"==e.text()&&e.text(curItem.province_name),curItem.city_name&&"选择市区"==t.text()&&t.text(curItem.city_name),curItem.region_name&&"选择县区"==n.text()&&n.text(curItem.region_name),curItem.phone&&!i.val()&&i.val(curItem.phone),curItem.realName&&!r.val()&&r.val(curItem.realName)}catch(a){}curAddr=new AddrSel({proBtn:"#J-pro-text",cityBtn:"#J-city-text",regionBtn:"#J-region-text",addr:{pro:curItem.province_name,proId:curItem.province_id,city:curItem.city_name,cityId:curItem.city_id,region:curItem.region_name,regionId:curItem.district_id}})}var $container,$radios,$addBtn,$editContainer,$saveBtn,$delBtn,selected,$pageContent,$=require("zepto"),Pop=require("common/pop/index"),Ajax=require("common/ajax/index"),Bubble=require("common/bubble/bubble"),AddrSel=require("common/addr-sel/index"),Confirm=require("common/confirm/index"),listTmpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="address-container">\r\n	<ul class="address-list" style="max-height: '+(null==(__t=maxHei)?"":__t)+'px">\r\n		',$.each(list,function(e,t){__p+='\r\n		<li class="address-item dib-wrap" addr-id="'+(null==(__t=t.id)?"":__t)+'">\r\n\r\n			<a class="radio ',1==t.isDefault&&(__p+="selected"),__p+=' dib"><i class="icon-radio"></i></a>\r\n			<div class="addr-info dib">\r\n				<p class="user"><span>'+(null==(__t=t.reName)?"":__t)+"，</span><span>"+(null==(__t=t.rePhone)?"":__t)+'</span></p>\r\n				<p class="addr">'+(null==(__t=t.provinceName+t.cityName+t.districtName+t.detailAddr)?"":__t)+'</p>\r\n			</div>\r\n			<a class="edit dib"><i class="icon-edit"></i></a>\r\n		</li>\r\n		'}),__p+='\r\n	</ul>\r\n	<div class="btn-add dib-wrap">\r\n		<span class="dib add-wrap"><i class="icon-add dib"></i></span>\r\n		<label class="dib">新增地址</label>\r\n		<span class="arrow-wrap dib"><i class="icon-arrow dib"></i></span>\r\n	</div>\r\n</div>';return __p},editTmpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="address-edit">\r\n	<ul>\r\n		<li>\r\n			<label>收货人</label>\r\n			<input class="J-name" placeholder="名字" value="'+(null==(__t=item.recipient_name)?"":__t)+'" />\r\n		</li>\r\n		<li>\r\n			<label>联系方式</label>\r\n			<input class="J-phone" type="tel" placeholder="手机或联系电话" value="'+(null==(__t=item.recipient_phone)?"":__t)+'" />\r\n		</li>\r\n		<li>\r\n			<label>选择地区</label>\r\n			<div class="addr-sel">\r\n				<div class="inner">\r\n					<div class="select-wrap">\r\n						<select id="J-pro-text">\r\n							<option>选择省份</option>\r\n						</select>\r\n					</div>\r\n					<div class="select-wrap">\r\n						<select id="J-city-text">\r\n							<option>选择市区</option>\r\n						</select>\r\n					</div>\r\n					<div class="select-wrap">\r\n						<select id="J-region-text">\r\n							<option>选择县区</option>\r\n						</select>\r\n					</div>\r\n				</div>\r\n				<!-- <label id="J-pro-text">'+(null==(__t=item.province_name||"选择省份")?"":__t)+'</label>\r\n				<label id="J-city-text">'+(null==(__t=item.city_name||"选择市区")?"":__t)+'</label>\r\n				<label id="J-region-text">'+(null==(__t=item.region_name||"选择县区")?"":__t)+'</label> -->\r\n			</div>\r\n		</li>\r\n		<li>\r\n			<label>详细地址</label>\r\n			<input class="J-addr" placeholder="街道门牌信息" value="'+(null==(__t=item.recipient_address)?"":__t)+'" />\r\n		</li>\r\n	</ul>\r\n	<div class="btnl-wrap">\r\n		<button type="submit" class="btnl btnl-wx J-save">保存</button>\r\n		',item.recipient_name&&(__p+='\r\n		<a class="btnl btnl-default J-del">删除</a>\r\n		'),__p+="\r\n	</div>\r\n</div>";return __p},listData=null,curAddr={},curItem={},curType="pop";module.exports={show:show,initPage:initPage}});
;define("address/index",function(n){function e(){d.initPage({container:"#J-address-section"})}var d=(n("zepto"),n("common/address/index"));e()});