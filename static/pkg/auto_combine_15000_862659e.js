define("underscore",function(n,r,t){(function(){function n(n){function r(r,t,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=t(e,r[a],a,r)}return e}return function(t,e,u,i){e=j(e,i,4);var o=!S(t)&&_.keys(t),a=(o||t).length,c=n>0?0:a-1;return arguments.length<3&&(u=t[o?o[c]:c],c+=n),r(t,e,u,o,c,a)}}function e(n){return function(r,t,e){t=x(t,e);for(var u=F(r),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(t(r[i],i,r))return i;return-1}}function u(n,r,t){return function(e,u,i){var o=0,a=F(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(t&&i&&a)return i=t(e,u),e[i]===u?i:-1;if(u!==u)return i=r(p.call(e,o,a),_.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function i(n,r){var t=B.length,e=n.constructor,u=_.isFunction(e)&&e.prototype||f,i="constructor";for(_.has(n,i)&&!_.contains(r,i)&&r.push(i);t--;)i=B[t],i in n&&n[i]!==u[i]&&!_.contains(r,i)&&r.push(i)}var o=this,a=o._,c=Array.prototype,f=Object.prototype,l=Function.prototype,s=c.push,p=c.slice,h=f.toString,v=f.hasOwnProperty,g=Array.isArray,y=Object.keys,d=l.bind,m=Object.create,b=function(){},_=function(n){return n instanceof _?n:this instanceof _?void(this._wrapped=n):new _(n)};"undefined"!=typeof r?("undefined"!=typeof t&&t.exports&&(r=t.exports=_),r._=_):o._=_,_.VERSION="1.8.3";var j=function(n,r,t){if(void 0===r)return n;switch(null==t?3:t){case 1:return function(t){return n.call(r,t)};case 2:return function(t,e){return n.call(r,t,e)};case 3:return function(t,e,u){return n.call(r,t,e,u)};case 4:return function(t,e,u,i){return n.call(r,t,e,u,i)}}return function(){return n.apply(r,arguments)}},x=function(n,r,t){return null==n?_.identity:_.isFunction(n)?j(n,r,t):_.isObject(n)?_.matcher(n):_.property(n)};_.iteratee=function(n,r){return x(n,r,1/0)};var w=function(n,r){return function(t){var e=arguments.length;if(2>e||null==t)return t;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];r&&void 0!==t[f]||(t[f]=i[f])}return t}},A=function(n){if(!_.isObject(n))return{};if(m)return m(n);b.prototype=n;var r=new b;return b.prototype=null,r},O=function(n){return function(r){return null==r?void 0:r[n]}},k=Math.pow(2,53)-1,F=O("length"),S=function(n){var r=F(n);return"number"==typeof r&&r>=0&&k>=r};_.each=_.forEach=function(n,r,t){r=j(r,t);var e,u;if(S(n))for(e=0,u=n.length;u>e;e++)r(n[e],e,n);else{var i=_.keys(n);for(e=0,u=i.length;u>e;e++)r(n[i[e]],i[e],n)}return n},_.map=_.collect=function(n,r,t){r=x(r,t);for(var e=!S(n)&&_.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=r(n[a],a,n)}return i},_.reduce=_.foldl=_.inject=n(1),_.reduceRight=_.foldr=n(-1),_.find=_.detect=function(n,r,t){var e;return e=S(n)?_.findIndex(n,r,t):_.findKey(n,r,t),void 0!==e&&-1!==e?n[e]:void 0},_.filter=_.select=function(n,r,t){var e=[];return r=x(r,t),_.each(n,function(n,t,u){r(n,t,u)&&e.push(n)}),e},_.reject=function(n,r,t){return _.filter(n,_.negate(x(r)),t)},_.every=_.all=function(n,r,t){r=x(r,t);for(var e=!S(n)&&_.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!r(n[o],o,n))return!1}return!0},_.some=_.any=function(n,r,t){r=x(r,t);for(var e=!S(n)&&_.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(r(n[o],o,n))return!0}return!1},_.contains=_.includes=_.include=function(n,r,t,e){return S(n)||(n=_.values(n)),("number"!=typeof t||e)&&(t=0),_.indexOf(n,r,t)>=0},_.invoke=function(n,r){var t=p.call(arguments,2),e=_.isFunction(r);return _.map(n,function(n){var u=e?r:n[r];return null==u?u:u.apply(n,t)})},_.pluck=function(n,r){return _.map(n,_.property(r))},_.where=function(n,r){return _.filter(n,_.matcher(r))},_.findWhere=function(n,r){return _.find(n,_.matcher(r))},_.max=function(n,r,t){var e,u,i=-1/0,o=-1/0;if(null==r&&null!=n){n=S(n)?n:_.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else r=x(r,t),_.each(n,function(n,t,e){u=r(n,t,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},_.min=function(n,r,t){var e,u,i=1/0,o=1/0;if(null==r&&null!=n){n=S(n)?n:_.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else r=x(r,t),_.each(n,function(n,t,e){u=r(n,t,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},_.shuffle=function(n){for(var r,t=S(n)?n:_.values(n),e=t.length,u=Array(e),i=0;e>i;i++)r=_.random(0,i),r!==i&&(u[i]=u[r]),u[r]=t[i];return u},_.sample=function(n,r,t){return null==r||t?(S(n)||(n=_.values(n)),n[_.random(n.length-1)]):_.shuffle(n).slice(0,Math.max(0,r))},_.sortBy=function(n,r,t){return r=x(r,t),_.pluck(_.map(n,function(n,t,e){return{value:n,index:t,criteria:r(n,t,e)}}).sort(function(n,r){var t=n.criteria,e=r.criteria;if(t!==e){if(t>e||void 0===t)return 1;if(e>t||void 0===e)return-1}return n.index-r.index}),"value")};var E=function(n){return function(r,t,e){var u={};return t=x(t,e),_.each(r,function(e,i){var o=t(e,i,r);n(u,e,o)}),u}};_.groupBy=E(function(n,r,t){_.has(n,t)?n[t].push(r):n[t]=[r]}),_.indexBy=E(function(n,r,t){n[t]=r}),_.countBy=E(function(n,r,t){_.has(n,t)?n[t]++:n[t]=1}),_.toArray=function(n){return n?_.isArray(n)?p.call(n):S(n)?_.map(n,_.identity):_.values(n):[]},_.size=function(n){return null==n?0:S(n)?n.length:_.keys(n).length},_.partition=function(n,r,t){r=x(r,t);var e=[],u=[];return _.each(n,function(n,t,i){(r(n,t,i)?e:u).push(n)}),[e,u]},_.first=_.head=_.take=function(n,r,t){return null==n?void 0:null==r||t?n[0]:_.initial(n,n.length-r)},_.initial=function(n,r,t){return p.call(n,0,Math.max(0,n.length-(null==r||t?1:r)))},_.last=function(n,r,t){return null==n?void 0:null==r||t?n[n.length-1]:_.rest(n,Math.max(0,n.length-r))},_.rest=_.tail=_.drop=function(n,r,t){return p.call(n,null==r||t?1:r)},_.compact=function(n){return _.filter(n,_.identity)};var M=function(n,r,t,e){for(var u=[],i=0,o=e||0,a=F(n);a>o;o++){var c=n[o];if(S(c)&&(_.isArray(c)||_.isArguments(c))){r||(c=M(c,r,t));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else t||(u[i++]=c)}return u};_.flatten=function(n,r){return M(n,r,!1)},_.without=function(n){return _.difference(n,p.call(arguments,1))},_.uniq=_.unique=function(n,r,t,e){_.isBoolean(r)||(e=t,t=r,r=!1),null!=t&&(t=x(t,e));for(var u=[],i=[],o=0,a=F(n);a>o;o++){var c=n[o],f=t?t(c,o,n):c;r?(o&&i===f||u.push(c),i=f):t?_.contains(i,f)||(i.push(f),u.push(c)):_.contains(u,c)||u.push(c)}return u},_.union=function(){return _.uniq(M(arguments,!0,!0))},_.intersection=function(n){for(var r=[],t=arguments.length,e=0,u=F(n);u>e;e++){var i=n[e];if(!_.contains(r,i)){for(var o=1;t>o&&_.contains(arguments[o],i);o++);o===t&&r.push(i)}}return r},_.difference=function(n){var r=M(arguments,!0,!0,1);return _.filter(n,function(n){return!_.contains(r,n)})},_.zip=function(){return _.unzip(arguments)},_.unzip=function(n){for(var r=n&&_.max(n,F).length||0,t=Array(r),e=0;r>e;e++)t[e]=_.pluck(n,e);return t},_.object=function(n,r){for(var t={},e=0,u=F(n);u>e;e++)r?t[n[e]]=r[e]:t[n[e][0]]=n[e][1];return t},_.findIndex=e(1),_.findLastIndex=e(-1),_.sortedIndex=function(n,r,t,e){t=x(t,e,1);for(var u=t(r),i=0,o=F(n);o>i;){var a=Math.floor((i+o)/2);t(n[a])<u?i=a+1:o=a}return i},_.indexOf=u(1,_.findIndex,_.sortedIndex),_.lastIndexOf=u(-1,_.findLastIndex),_.range=function(n,r,t){null==r&&(r=n||0,n=0),t=t||1;for(var e=Math.max(Math.ceil((r-n)/t),0),u=Array(e),i=0;e>i;i++,n+=t)u[i]=n;return u};var I=function(n,r,t,e,u){if(!(e instanceof r))return n.apply(t,u);var i=A(n.prototype),o=n.apply(i,u);return _.isObject(o)?o:i};_.bind=function(n,r){if(d&&n.bind===d)return d.apply(n,p.call(arguments,1));if(!_.isFunction(n))throw new TypeError("Bind must be called on a function");var t=p.call(arguments,2),e=function(){return I(n,e,r,this,t.concat(p.call(arguments)))};return e},_.partial=function(n){var r=p.call(arguments,1),t=function(){for(var e=0,u=r.length,i=Array(u),o=0;u>o;o++)i[o]=r[o]===_?arguments[e++]:r[o];for(;e<arguments.length;)i.push(arguments[e++]);return I(n,t,this,this,i)};return t},_.bindAll=function(n){var r,t,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(r=1;e>r;r++)t=arguments[r],n[t]=_.bind(n[t],n);return n},_.memoize=function(n,r){var t=function(e){var u=t.cache,i=""+(r?r.apply(this,arguments):e);return _.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return t.cache={},t},_.delay=function(n,r){var t=p.call(arguments,2);return setTimeout(function(){return n.apply(null,t)},r)},_.defer=_.partial(_.delay,_,1),_.throttle=function(n,r,t){var e,u,i,o=null,a=0;t||(t={});var c=function(){a=t.leading===!1?0:_.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=_.now();a||t.leading!==!1||(a=f);var l=r-(f-a);return e=this,u=arguments,0>=l||l>r?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||t.trailing===!1||(o=setTimeout(c,l)),i}},_.debounce=function(n,r,t){var e,u,i,o,a,c=function(){var f=_.now()-o;r>f&&f>=0?e=setTimeout(c,r-f):(e=null,t||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=_.now();var f=t&&!e;return e||(e=setTimeout(c,r)),f&&(a=n.apply(i,u),i=u=null),a}},_.wrap=function(n,r){return _.partial(r,n)},_.negate=function(n){return function(){return!n.apply(this,arguments)}},_.compose=function(){var n=arguments,r=n.length-1;return function(){for(var t=r,e=n[r].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},_.after=function(n,r){return function(){return--n<1?r.apply(this,arguments):void 0}},_.before=function(n,r){var t;return function(){return--n>0&&(t=r.apply(this,arguments)),1>=n&&(r=null),t}},_.once=_.partial(_.before,2);var N=!{toString:null}.propertyIsEnumerable("toString"),B=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];_.keys=function(n){if(!_.isObject(n))return[];if(y)return y(n);var r=[];for(var t in n)_.has(n,t)&&r.push(t);return N&&i(n,r),r},_.allKeys=function(n){if(!_.isObject(n))return[];var r=[];for(var t in n)r.push(t);return N&&i(n,r),r},_.values=function(n){for(var r=_.keys(n),t=r.length,e=Array(t),u=0;t>u;u++)e[u]=n[r[u]];return e},_.mapObject=function(n,r,t){r=x(r,t);for(var e,u=_.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=r(n[e],e,n);return o},_.pairs=function(n){for(var r=_.keys(n),t=r.length,e=Array(t),u=0;t>u;u++)e[u]=[r[u],n[r[u]]];return e},_.invert=function(n){for(var r={},t=_.keys(n),e=0,u=t.length;u>e;e++)r[n[t[e]]]=t[e];return r},_.functions=_.methods=function(n){var r=[];for(var t in n)_.isFunction(n[t])&&r.push(t);return r.sort()},_.extend=w(_.allKeys),_.extendOwn=_.assign=w(_.keys),_.findKey=function(n,r,t){r=x(r,t);for(var e,u=_.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],r(n[e],e,n))return e},_.pick=function(n,r,t){var e,u,i={},o=n;if(null==o)return i;_.isFunction(r)?(u=_.allKeys(o),e=j(r,t)):(u=M(arguments,!1,!1,1),e=function(n,r,t){return r in t},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},_.omit=function(n,r,t){if(_.isFunction(r))r=_.negate(r);else{var e=_.map(M(arguments,!1,!1,1),String);r=function(n,r){return!_.contains(e,r)}}return _.pick(n,r,t)},_.defaults=w(_.allKeys,!0),_.create=function(n,r){var t=A(n);return r&&_.extendOwn(t,r),t},_.clone=function(n){return _.isObject(n)?_.isArray(n)?n.slice():_.extend({},n):n},_.tap=function(n,r){return r(n),n},_.isMatch=function(n,r){var t=_.keys(r),e=t.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=t[i];if(r[o]!==u[o]||!(o in u))return!1}return!0};var T=function(n,r,t,e){if(n===r)return 0!==n||1/n===1/r;if(null==n||null==r)return n===r;n instanceof _&&(n=n._wrapped),r instanceof _&&(r=r._wrapped);var u=h.call(n);if(u!==h.call(r))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+r;case"[object Number]":return+n!==+n?+r!==+r:0===+n?1/+n===1/r:+n===+r;case"[object Date]":case"[object Boolean]":return+n===+r}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof r)return!1;var o=n.constructor,a=r.constructor;if(o!==a&&!(_.isFunction(o)&&o instanceof o&&_.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in r)return!1}t=t||[],e=e||[];for(var c=t.length;c--;)if(t[c]===n)return e[c]===r;if(t.push(n),e.push(r),i){if(c=n.length,c!==r.length)return!1;for(;c--;)if(!T(n[c],r[c],t,e))return!1}else{var f,l=_.keys(n);if(c=l.length,_.keys(r).length!==c)return!1;for(;c--;)if(f=l[c],!_.has(r,f)||!T(n[f],r[f],t,e))return!1}return t.pop(),e.pop(),!0};_.isEqual=function(n,r){return T(n,r)},_.isEmpty=function(n){return null==n?!0:S(n)&&(_.isArray(n)||_.isString(n)||_.isArguments(n))?0===n.length:0===_.keys(n).length},_.isElement=function(n){return!(!n||1!==n.nodeType)},_.isArray=g||function(n){return"[object Array]"===h.call(n)},_.isObject=function(n){var r=typeof n;return"function"===r||"object"===r&&!!n},_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){_["is"+n]=function(r){return h.call(r)==="[object "+n+"]"}}),_.isArguments(arguments)||(_.isArguments=function(n){return _.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(_.isFunction=function(n){return"function"==typeof n||!1}),_.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},_.isNaN=function(n){return _.isNumber(n)&&n!==+n},_.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===h.call(n)},_.isNull=function(n){return null===n},_.isUndefined=function(n){return void 0===n},_.has=function(n,r){return null!=n&&v.call(n,r)},_.noConflict=function(){return o._=a,this},_.identity=function(n){return n},_.constant=function(n){return function(){return n}},_.noop=function(){},_.property=O,_.propertyOf=function(n){return null==n?function(){}:function(r){return n[r]}},_.matcher=_.matches=function(n){return n=_.extendOwn({},n),function(r){return _.isMatch(r,n)}},_.times=function(n,r,t){var e=Array(Math.max(0,n));r=j(r,t,1);for(var u=0;n>u;u++)e[u]=r(u);return e},_.random=function(n,r){return null==r&&(r=n,n=0),n+Math.floor(Math.random()*(r-n+1))},_.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},q=_.invert(R),K=function(n){var r=function(r){return n[r]},t="(?:"+_.keys(n).join("|")+")",e=RegExp(t),u=RegExp(t,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,r):n}};_.escape=K(R),_.unescape=K(q),_.result=function(n,r,t){var e=null==n?void 0:n[r];return void 0===e&&(e=t),_.isFunction(e)?e.call(n):e};var z=0;_.uniqueId=function(n){var r=++z+"";return n?n+r:r},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\u2028|\u2029/g,C=function(n){return"\\"+L[n]};_.template=function(n,r,t){!r&&t&&(r=t),r=_.defaults({},r,_.templateSettings);var e=RegExp([(r.escape||D).source,(r.interpolate||D).source,(r.evaluate||D).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(r,t,e,o,a){return i+=n.slice(u,a).replace(P,C),u=a+r.length,t?i+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),r}),i+="';\n",r.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(r.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,_)},f=r.variable||"obj";return c.source="function("+f+"){\n"+i+"}",c},_.chain=function(n){var r=_(n);return r._chain=!0,r};var J=function(n,r){return n._chain?_(r).chain():r};_.mixin=function(n){_.each(_.functions(n),function(r){var t=_[r]=n[r];_.prototype[r]=function(){var n=[this._wrapped];return s.apply(n,arguments),J(this,t.apply(_,n))}})},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var r=c[n];_.prototype[n]=function(){var t=this._wrapped;return r.apply(t,arguments),"shift"!==n&&"splice"!==n||0!==t.length||delete t[0],J(this,t)}}),_.each(["concat","join","slice"],function(n){var r=c[n];_.prototype[n]=function(){return J(this,r.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}).call(this)});
;define("common/copyright/index",function(require,exports,module){function render(){if(!($("#copyright").length>0||$(".copyright").length>0)){var t=$body.attr("no-copyright");1!=t&&($body.append($(_tmpl())),$copyright=$("#copyright"),reset())}}function reset(){var t=$body.height(),o=$win.height();o>t+HEI?($body.css({"min-height":o+"px",position:"relative"}),$copyright.css({position:"absolute",width:"100%",bottom:$body.css("padding-bottom")})):$copyright.css({position:"static",width:"auto"})}var $copyright,$=require("zepto"),_tmpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div id="copyright">一惠到家&nbsp;提供技术支持</div>';return __p},HEI=64,$body=$(document.body),$win=$(window);module.exports={render:render,reset:reset}});
;define("common/util/index",function(n,t,a){function r(n,t){return n+Math.ceil(Math.random()*t)}function e(n,t){return n+Math.floor(Math.random()*t)}function i(n,t){var a=new RegExp("(^|&)"+n+"=([^&]*)(&|$)","i"),t=t||location.search,r=t.substr(1).match(a);return t&&r?r[2]:""}function o(){function n(n){for(var a in n)if(void 0!==t.style[a])return n[a]}var t=document.createElement("trans"),a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},r={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return{transEvtName:n(a),aniEvtName:n(r)}}function s(n){return"object"==typeof phpdata?void(n&&n(phpdata)):void setTimeout(function(){s(n)},200)}var u={};!function(n){function t(n){if(n=i(n.replace(/ /g,"")),15==n.length)return e(n);if(18==n.length){var t=n.split("");return r(n)&&a(t)?!0:!1}return!1}function a(n){var t=0;"x"==n[17].toLowerCase()&&(n[17]=10);for(var a=0;17>a;a++)t+=o[a]*n[a];return valCodePosition=t%11,n[17]==s[valCodePosition]?!0:!1}function r(n){var t=n.substring(6,10),a=n.substring(10,12),r=n.substring(12,14),e=new Date(t,parseFloat(a)-1,parseFloat(r));return e.getFullYear()!=parseFloat(t)||e.getMonth()!=parseFloat(a)-1||e.getDate()!=parseFloat(r)?!1:!0}function e(n){var t=n.substring(6,8),a=n.substring(8,10),r=n.substring(10,12),e=new Date(t,parseFloat(a)-1,parseFloat(r));return e.getYear()!=parseFloat(t)||e.getMonth()!=parseFloat(a)-1||e.getDate()!=parseFloat(r)?!1:!0}function i(n){return n.replace(/(^\s*)|(\s*$)/g,"")}var o=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],s=[1,0,10,9,8,7,6,5,4,3,2];n.valid=t}(u),a.exports={getParam:i,random:r,random2:e,getAniEndName:o,phpdataReady:s,IdCard:u}});
;define("common/bubble/bubble",function(require,exports,module){function show(e,t){$b||($(document.body).append(_tmpl),$b=$("#J-bubble"),$content=$b.find(".bubble-content")),$content.text(e),$b.css("display","block").animate({opacity:1}),timer&&clearTimeout(timer),timer=setTimeout(function(){hide(),timer=null},t||2e3)}function hide(){$b.animate({opacity:0},function(){$b.css("display","none")})}var timer,$b,$content,$=require("zepto"),_tmpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div id="J-bubble" class="bubble">\r\n	<div class="mask"></div>\r\n	<div class="bubble-content"></div>\r\n</div>';return __p}();module.exports={show:show,hide:hide}});
;define("common/config/index",function($,n,o){o.exports={cutArr:["华丽的一刀！砍掉了$0元！","好狠的一刀！砍掉了$0元！","帅气的一刀！砍掉了$0元！","猥琐的一刀！砍掉了$0元！","霸气的一刀！砍掉了$0元！","精彩的一刀！砍掉了$0元！","犀利的一刀！砍掉了$0元！","轻轻的一刀！砍掉了$0元！","温柔的一刀！砍掉了$0元！","潇洒的一刀！砍掉了$0元！","漂亮的一刀！砍掉了$0元！"]}});
;define("common/pop/index",function(require,exports,module){function _init(){$pop||($(document.body).append(_tmpl()),$pop=$("#J-pop"),$mask=$pop.find(".mask"),$container=$pop.find(".container"),$title=$pop.find(".title"),$content=$pop.find(".content"),$close=$pop.find(".close")),$mask.add($close).on("click",function(){curOptions.manualClose!==!1&&hide()})}function show(o){curOptions=o,winScrollY=o.autoY?window.scrollY:0,$content.html($(o.content)),$("input").on("focus",inputFocus),o.hasClose===!1?$close.css("display","none"):$close.css("display","block"),o.title?$title.text(o.title).css("display","block"):$title.css("display","none"),o.scroll?$pop.css("position","fixed"):($pop.css("position","absolute"),$("html").attr("style","position: relative; overflow: hidden; height: "+winHei+"px;"),$("body").attr("style","overflow: hidden; height: "+winHei+"px; padding: 0px;")),$pop.css("display","block"),$container.animate({translateY:"0"},500,"ease-out")}function hide(o){$container.animate({translateY:"100%"},500,"ease-in",function(){$("html").attr("style",""),$("body").attr("style",""),$pop.css("display","none"),!curOptions.scroll&&winScrollY&&window.scroll(0,winScrollY),o&&o()})}function inputFocus(){function o(){$(window).off("resize",o)}$(this);$(window).on("resize",o)}var curOptions,$pop,$mask,$container,$content,$=require("zepto"),_tmpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div id="J-pop" class="pop">\r\n	<div class="mask"></div>\r\n	<div class="container">\r\n		<div class="close"></div>\r\n		<div class="title"></div>\r\n		<div class="content"></div>\r\n	</div>\r\n</div>';return __p},winHei=$(window).height(),winScrollY=0;_init(),module.exports={show:show,hide:hide}});
;define("common/alert/alert",function(require,exports,module){function show(e,t,o,n){$alert?$alert.css("display","block"):($(document.body).append(_tmpl()),$alert=$("#J-alert"),$contentWrap=$("#J-alert-content-wrap"),$content=$("#J-alert-content"),$mask=$("#J-alert-mask"),$close=$("#J-alert-close"),$close.on("click",function(e){hide(),e.preventDefault(),n&&n()})),o&&(addClsName=o,$contentWrap.addClass(o)),winScrollY=window.scrollY,htmlStyle=$html.attr("style"),bodyStyle=$body.attr("style"),$html.attr("style","position: relative; overflow: hidden; height: "+winHei+"px;"),$body.attr("style","overflow: hidden; height: "+winHei+"px; padding: 0px;"),"string"!=typeof e||/<.*>/.test(e)?$content.html($(e)):(/close=0/.test(e)&&(t=!1),$content.html($(_createIframe(e)))),t===!0||void 0===t?$close.css("display","block"):$close.css("display","none"),_resize(),$win.on("resize",_resize)}function hide(){addClsName&&($contentWrap.removeClass(addClsName),addClsName=void 0),$alert.css("display","none"),$win.off("resize",_resize),$html.attr("style",htmlStyle),$body.attr("style",bodyStyle),window.scroll(0,winScrollY)}function _createIframe(e){var t=document.createElement("iframe");return t.src=e,t.onload=function(){_hasCloseByUrl(t.contentWindow.location.search),t.style.height=t.contentWindow.document.body.offsetHeight+"px",_resize()},t}function _resize(){var e=$win.height(),t=$contentWrap.height();$contentWrap.css("margin-top",(e-t)/2)}function _hasCloseByUrl(e){var t=Util.getParam("close",e);"0"===t?$close.css("display","none"):$close.css("display","block")}var $alert,$mask,$contentWrap,$content,$close,bodyStyle,htmlStyle,addClsName,$=require("zepto"),Util=require("common/util/index"),_tmpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div id="J-alert" class="alert">\r\n	<div id="J-alert-mask" class="mask"></div>\r\n	<div id="J-alert-content-wrap" class="alert-content">\r\n		<i id="J-alert-close" class="icon-close"></i>\r\n		<div id="J-alert-content"></div>\r\n	</div>\r\n</div>';return __p},$win=$(window),$html=$("html"),$body=$(document.body),winHei=$win.height(),winScrollY=0;module.exports={show:show,hide:hide}});
;define("common/confirm-service/index",function(require,exports,module){function validService(e,n,r,o,t){Ajax=r,recommend="",recommendLog={},(new Ajax).send({url:"/WeChat/Band/checkUserRecommend",type:"post",data:{phone:e,code:n}},function(n){var r=n.type;switch(recommendLog.type=r,recommendLog.phone=e,r){case 0:o&&o();break;case 1:selServicePeople(n,function(){recommendLog.userList=n.user,recommendLog.selRecommend=recommend,recordLog(),o&&o(recommend)});break;case 2:showPhoneService(function(){10==recommendLog.type||(recommendLog.selRecommend=recommend),recordLog(),o&&o(recommend)})}},function(){t&&t()})}function recordLog(){(new Ajax).send({url:"/User/Register/selectRecommendLog",type:"post",data:{data:JSON.stringify(recommendLog)}},function(e){console.log(e)})}function selServicePeople(e,n){var r;Alert.show(_selServiceTmpl({userList:e.user}),!1,"service-alert"),r=$(".service-alert-content"),r.find(".J-sel-btn").on("click",function(){Alert.hide(),recommend=$(this).attr("recommend"),n&&n()})}function showPhoneService(e){var n,r,o;Alert.show(_phoneServiceTmpl(),!1,"service-alert"),n=$(".service-alert-content"),r=n.find(".J-phone"),o=n.find(".J-submit"),r.get(0).focus(),r.on("input",function(){var e=r.val().trim();/^1[3-8]\d{9}$/.test(e)?getService(e,function(e){recommendLog.userList=[e],o.removeClass("disabled"),recommend=e.recommend,n.find(".userinfo").html('<div class="head-img" style="background-image:url('+e.headImg+')"></div><div class="user-name">'+e.userName+"</div>")},function(e){o.addClass("disabled"),n.find(".userinfo").html('<p class="err">'+e.msg+"</p>")}):(o.addClass("disabled"),n.find(".userinfo").html(""))}),o.on("click",function(){r.val();return o.hasClass("disabled")?!1:(Alert.hide(),void(e&&e()))}),n.find(".J-self-link").on("click",function(){recommend="",Alert.hide(),recommendLog.type=10,e&&e()})}function getService(e,n,r){(new Ajax).send({url:"/WeChat/Band/getRecommendPhone",data:{phone:e},selfErrorBack:!0},function(e){n&&n(e)},function(e){r&&r(e)})}var Ajax,recommend,recommendLog,$=require("zepto"),Alert=(require("common/bubble/bubble"),require("common/alert/alert")),_selServiceTmpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="service-alert-content">\r\n	',__p+=2==userList.length?'\r\n	<p class="title">请选择一位朋友作为您的推荐人(<b>2选1</b>)</p>\r\n	':'\r\n	<p class="title">请确认您的推荐人</p>\r\n	',__p+='\r\n	<ul class="service-list">\r\n		',$.each(userList,function(e,n){__p+='\r\n		<li>\r\n			<div class="img-wrap headimg" style="background-image:url('+(null==(__t=n.headImg)?"":__t)+')"></div>\r\n			<p class="user-name">'+(null==(__t=n.userName)?"":__t)+'</p>\r\n			<p class="phone-label">'+(null==(__t=n.phone)?"":__t)+'</p>\r\n			<a class="J-sel-btn btnl" recommend="'+(null==(__t=n.recommend)?"":__t)+'">就Ta了</a>\r\n		</li>\r\n		'}),__p+="\r\n	</ul>\r\n</div>";return __p},_phoneServiceTmpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div class="service-alert-content">\r\n	<p class="title">请填写您的推荐人</p>\r\n	<div class="input-wrap phone-wrap">\r\n        <label>手机号</label>\r\n        <input class="J-phone" type="tel" name="phone" placeholder="请输入推荐人手机号码" autocomplete="off">\r\n    </div>\r\n    <div class="userinfo"></div>\r\n    <div class="btn-content">\r\n    	<button type="button" class="J-submit btnl btnl-wx disabled">确认</button>\r\n    </div>\r\n    <div class="link-wrap">\r\n        <a class="J-self-link link">我自己逛来的</a>\r\n    </div>\r\n</div>';return __p};module.exports={start:validService}});
;define("common/login-pop/index",function(require,exports,module){function show(n){Pop.show({content:_tmpl(),hasClose:!1,manualClose:n.manualClose}),init(n)}function init(n){options=n,Ajax=n.Ajax,$yzmBt=$("#J-yzm-bt"),$submitBt=$("#J-phone-ok"),$phone=$("#J-phone"),$code=$("#J-code"),$yzmBt.on("click",getCode),$submitBt.on("click",login)}function getCode(){function n(){setTimeout(function(){return o--,$yzmBt.text(o),0>=o?(disabled=!1,void $yzmBt.text("获取验证码").removeClass("disabled")):void n()},1e3)}if(disabled)return!1;var e=$phone.val(),o=60;return(new Ajax).send({url:"/WeChat/Band/sendMsg",data:{phone:e}},function(){disabled=!0,$yzmBt.text(o).addClass("disabled"),n()}),!1}function login(){function n(){(new Ajax).send({url:"/WeChat/Band/bandAccount",type:"post",data:e},function(){loagining=!1,Pop.hide(),options.loginSuc&&options.loginSuc()},function(){loagining=!1})}var e,o=$phone.val(),t=$code.val();return o?/^\d{11}$/.test(o)?t?loagining?!1:(e={phone:o,code:t},"object"==typeof phpdata&&$.each(["channelType","channelId"],function(n,o){phpdata[o]&&(e[o]=phpdata[o])}),loagining=!0,options.noSelRecommend?n():ConfirmService.start(o,t,Ajax,function(o){o&&(e.recommend=o),n()},function(){loagining=!1}),!1):(Bubble.show("请输入验证码"),!1):(Bubble.show("请输入正确的手机号码"),!1):(Bubble.show("请输入您的手机号码"),!1)}var Ajax,options,$yzmBt,$submitBt,$phone,$code,$=require("zepto"),Pop=require("common/pop/index"),Bubble=require("common/bubble/bubble"),ConfirmService=(require("common/alert/alert"),require("common/confirm-service/index")),_tmpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<section class="phone-panel">\r\n	<div class="input-wrap">\r\n		<label>手机号</label>\r\n		<input id="J-phone" type="tel" placeholder="请输入您的手机号码" />\r\n	</div>\r\n	<div class="yzm">\r\n		<div class="input-wrap">\r\n			<label>验证码</label>\r\n			<input id="J-code" type="tel" placeholder="输入验证码" />\r\n		</div>\r\n		<button style="vertical-align: top;" id="J-yzm-bt" type="button">获取验证码</button>\r\n	</div>\r\n	<div>\r\n		<button id="J-phone-ok" class="btnl btnl-wx">确认</button>\r\n	</div>\r\n</section>';return __p},disabled=!1,loagining=!1;module.exports={show:show,init:init}});
;define("common/ajax/index",function(o,e,t){function a(){}var n=o("zepto"),r=o("common/bubble/bubble"),i=o("common/config/index"),u=o("common/login-pop/index");a.prototype={send:function(o,e,t){var c=this;o||(o={}),"dev"==i.mod?(o.dataType="jsonp",o.type="get",o.url=i.host+o.url):o.dataType=o.dataType||"json",o.url+=o.url.match(/\?[^=]+=.*$/)?"&isAjax=1":"?isAjax=1",o.success=function(n){if(o.selfBack)return void(e&&e(n));var i=n.msg,s=n.url;if(0==n.code){if(e&&e(n.result,n),o.selfSucBack)return}else{if(1e3==n.code)return void u.show({Ajax:a,loginSuc:function(){return o.selfLoginSuc?void o.selfLoginSuc():void c.send(o,e,t)}});if(t&&t(n),o.selfErrorBack)return}i?(r.show(i),s&&setTimeout(function(){location.href=s},2e3)):s&&(location.href=s)},o.error=function(){r.show("啊哦，网络异常啦！检查下网络吧~"),t&&t()},n.ajax(o)}},a.formatAjaxParams=function(o){var e=n(o),t=e.attr("ajax-data"),a={url:e.attr("ajax-url"),type:e.attr("ajax-type")||"get"};return t&&(a.data=JSON.parse(t)),a},t.exports=a});
;define("common/page-loader/index",function(o,n,i){function e(o){this.options=o,this.$container=l(o.container),this.$seeMore=l(o.seeMore),this.$loading=l(o.loading),this.getHtml=o.getHtml,this.pageNum=o.pageBegin||1,this.loading=!1,this.hasAll=!1,this.scrollKey=o.scrollKey,this.isScrollInit=!0,this._init()}var t="click",l=o("zepto"),s=window,r=l(s),a=s.scrollY,c=r.height();e.prototype={loadFirst:function(){return this._rendData(),this},loadEnd:function(o){this._loadEndBack=o},_init:function(){this._addEvents()},_addEvents:function(){function o(){return"none"==n.$container.css("display")?!1:n.hasAll?!1:!0}var n=this;n.options.seeMore?n.$seeMore.on(t,function(i){o()&&(n._rendData(),i.preventDefault())}):(n.scrollKey?n._scollTo(n.scrollKey):n.isScrollInit=!1,r.on("scroll",function(){!n.isScrollInit&&n.scrollKey&&sessionStorage.setItem(n.scrollKey,scrollY),o()&&n._scroll()}))},_scollTo:function(o){var n=sessionStorage.getItem(o),i=this;return n?window.scrollY>=n?void(i.isScrollInit=!1):void setTimeout(function(){window.scroll(0,n),i._scollTo(o)},50):void(i.isScrollInit=!1)},_scroll:function(){var o,n=this,i=s.scrollY,e=i>=.9*(l(document).height()-c);o=i>=a?"up":"down",a=i,!n.loading&&"up"==o&&e&&n._rendData()},_rendData:function(){var o=this,n=o.pageNum,i=o.$loading.length>0?o.$loading:l("#J-loading");return o.loading?!1:(o.loading=!0,i.css("display","block"),void o.getHtml(n,function(n,e){o.loading=!1,i.css("display","none"),1==o.pageNum?(o.$container.html(n),o.$seeMore[0]&&o.$seeMore.css("display","block")):o.$container.append(n),o.pageNum++,(!n.trim()||e&&o.$container.children().length>=e)&&(o.hasAll=!0,o._loadEndBack&&o._loadEndBack(),o.$seeMore[0]&&o.$seeMore.remove())}))}},i.exports=e});
;define("common/timer/timer",function(t,e,r){function i(t,e){this.$el=a(t),this.format=e;var r=+this.$el.attr("timer-end"),i="object"==typeof phpdata?phpdata.serverTime:null,o=+this.$el.attr("timer");r&&i?this.lastTime=r-i:(o||0==o)&&(this.lastTime=this.oTime=o),this.day=0,this.hour=0,this.min=0,this.sec=0,this._timer=null}var a=t("zepto");i.prototype={start:function(){var t=this;if(t.lastTime||0==t.lastTime)return t._walk(),t},end:function(t){return this._endBack=t,this},_walk:function(){var t=this;return t.$el.html(t._format(t.lastTime<0?0:t.lastTime)),t.lastTime<=0?void(this.oTime>0&&t._endBack&&t._endBack()):(t.lastTime--,void(t._timer=setTimeout(function(){t._walk()},1e3)))},_format:function(t){var e=this,r=parseInt(t/3600,10),i=parseInt((t-3600*r)/60),a=t-3600*r-60*i,o=parseInt(r/24);return r-=24*o,e.day=o,e.hour=r,e.min=i,e.sec=a,"function"==typeof e.format?e.format(t):"single"==e.format?o>0?e._addZero(o)+"天":r>0?e._addZero(r)+"小时":i>0?e._addZero(i)+"分钟":a>0?e._addZero(a)+"秒":"0秒":"time"==e.format?e._addZero(24*o+r)+":"+e._addZero(i)+":"+e._addZero(a):(o>0?e._addZero(o)+"天":"")+e._addZero(r)+"时"+e._addZero(i)+"分"+e._addZero(a)+"秒"},_addZero:function(t){return t.toString().length<2?"0"+t:t}},i.addZero=function(t){return t.toString().length<2?"0"+t:t},r.exports=i});
;define("common/fix-top/index",function(t,i,s){function o(t){this.$el=n(t.el),this.pos=this.$el.offset(),this.gap=5,this.status="normal",this._init()}var n=t("zepto"),e=window;o.prototype={_init:function(){this._addEvent()},_addEvent:function(){var t=this;n(window).on("scroll",function(){t._scroll()})},_scroll:function(){var t=this,i=e.scrollY,s=i+t.gap;if(t.pos.top<s){if("fixed"==t.status)return;t.$el.css({position:"fixed","z-index":500,top:0,width:"100%"}),t.status="fixed"}else{if("normal"==t.status)return;t.$el.css({position:"static"}),t.status="normal"}}},s.exports=o});
;define("common/swipe/swipe",function(n,t,e){function i(n,t){"use strict";function e(){m=x.children,w=m.length,m.length<2&&(t.continuous=!1),h.transitions&&t.continuous&&m.length<3&&(x.appendChild(m[0].cloneNode(!0)),x.appendChild(x.children[1].cloneNode(!0)),m=x.children),E=new Array(m.length),p=n.getBoundingClientRect().width||n.offsetWidth,x.style.width=m.length*p+"px";for(var e=m.length;e--;){var i=m[e];i.style.width=p+"px",i.setAttribute("data-index",e),h.transitions&&(i.style.left=e*-p+"px",a(e,b>e?-p:e>b?p:0,0))}t.continuous&&h.transitions&&(a(s(b-1),-p,0),a(s(b+1),p,0)),h.transitions||(x.style.left=b*-p+"px"),n.style.visibility="visible"}function i(){t.continuous?r(b-1):b&&r(b-1)}function o(){t.continuous?r(b+1):b<m.length-1&&r(b+1)}function s(n){return(m.length+n%m.length)%m.length}function r(n,e){if(b!=n){if(h.transitions){var i=Math.abs(b-n)/(b-n);if(t.continuous){var o=i;i=-E[s(n)]/p,i!==o&&(n=-i*m.length+n)}for(var r=Math.abs(b-n)-1;r--;)a(s((n>b?n:b)-r-1),p*i,0);n=s(n),a(b,p*i,e||g),a(n,0,e||g),t.continuous&&a(s(n-i),-(p*i),0)}else n=s(n),c(b*-p,n*-p,e||g);b=n,f(t.callback&&t.callback(b,m[b]))}}function a(n,t,e){u(n,t,e),E[n]=t}function u(n,t,e){var i=m[n],o=i&&i.style;o&&(o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=e+"ms",o.webkitTransform="translate("+t+"px,0)translateZ(0)",o.msTransform=o.MozTransform=o.OTransform="translateX("+t+"px)")}function c(n,e,i){if(!i)return void(x.style.left=e+"px");var o=+new Date,s=setInterval(function(){var r=+new Date-o;return r>i?(x.style.left=e+"px",L&&d(),t.transitionEnd&&t.transitionEnd.call(event,b,m[b]),void clearInterval(s)):void(x.style.left=(e-n)*(Math.floor(r/i*100)/100)+n+"px")},4)}function d(){T=setTimeout(o,L)}function l(){L=0,clearTimeout(T)}var v=function(){},f=function(n){setTimeout(n||v,0)},h={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(n){var t=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var e in t)if(void 0!==n.style[t[e]])return!0;return!1}(document.createElement("swipe"))};if(n){var m,E,p,w,x=n.children[0];t=t||{};var b=parseInt(t.startSlide,10)||0,g=t.speed||300;t.continuous=void 0!==t.continuous?t.continuous:!0;var T,y,L=t.auto||0,k={},D={},M={handleEvent:function(n){switch(n.type){case"touchstart":this.start(n);break;case"touchmove":this.move(n);break;case"touchend":f(this.end(n));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":f(this.transitionEnd(n));break;case"resize":f(e.call())}t.stopPropagation&&n.stopPropagation()},start:function(n){var t=n.touches[0];k={x:t.pageX,y:t.pageY,time:+new Date},y=void 0,D={},x.addEventListener("touchmove",this,!1),x.addEventListener("touchend",this,!1)},move:function(n){if(!(n.touches.length>1||n.scale&&1!==n.scale)){t.disableScroll&&n.preventDefault();var e=n.touches[0];D={x:e.pageX-k.x,y:e.pageY-k.y},"undefined"==typeof y&&(y=!!(y||Math.abs(D.x)<Math.abs(D.y))),y||(n.preventDefault(),l(),t.continuous?(u(s(b-1),D.x+E[s(b-1)],0),u(b,D.x+E[b],0),u(s(b+1),D.x+E[s(b+1)],0)):(D.x=D.x/(!b&&D.x>0||b==m.length-1&&D.x<0?Math.abs(D.x)/p+1:1),u(b-1,D.x+E[b-1],0),u(b,D.x+E[b],0),u(b+1,D.x+E[b+1],0)))}},end:function(){var n=+new Date-k.time,e=Number(n)<250&&Math.abs(D.x)>20||Math.abs(D.x)>p/2,i=!b&&D.x>0||b==m.length-1&&D.x<0;t.continuous&&(i=!1);var o=D.x<0;y||(e&&!i?(o?(t.continuous?(a(s(b-1),-p,0),a(s(b+2),p,0)):a(b-1,-p,0),a(b,E[b]-p,g),a(s(b+1),E[s(b+1)]-p,g),b=s(b+1)):(t.continuous?(a(s(b+1),p,0),a(s(b-2),-p,0)):a(b+1,p,0),a(b,E[b]+p,g),a(s(b-1),E[s(b-1)]+p,g),b=s(b-1)),t.callback&&t.callback(b,m[b])):t.continuous?(a(s(b-1),-p,g),a(b,0,g),a(s(b+1),p,g)):(a(b-1,-p,g),a(b,0,g),a(b+1,p,g))),x.removeEventListener("touchmove",M,!1),x.removeEventListener("touchend",M,!1)},transitionEnd:function(n){parseInt(n.target.getAttribute("data-index"),10)==b&&(L&&d(),t.transitionEnd&&t.transitionEnd.call(n,b,m[b]))}};return e(),L&&d(),h.addEventListener?(h.touch&&x.addEventListener("touchstart",M,!1),h.transitions&&(x.addEventListener("webkitTransitionEnd",M,!1),x.addEventListener("msTransitionEnd",M,!1),x.addEventListener("oTransitionEnd",M,!1),x.addEventListener("otransitionend",M,!1),x.addEventListener("transitionend",M,!1)),window.addEventListener("resize",M,!1)):window.onresize=function(){e()},{setup:function(){e()},slide:function(n,t){l(),r(n,t)},prev:function(){l(),i()},next:function(){l(),o()},getPos:function(){return b},getNumSlides:function(){return w},kill:function(){l(),x.style.width="auto",x.style.left=0;for(var n=m.length;n--;){var t=m[n];t.style.width="100%",t.style.left=0,h.transitions&&u(n,0,0)}h.addEventListener?(x.removeEventListener("touchstart",M,!1),x.removeEventListener("webkitTransitionEnd",M,!1),x.removeEventListener("msTransitionEnd",M,!1),x.removeEventListener("oTransitionEnd",M,!1),x.removeEventListener("otransitionend",M,!1),x.removeEventListener("transitionend",M,!1),window.removeEventListener("resize",M,!1)):window.onresize=null}}}}e.exports=i});
;define("common/swiper/index",function(i,e,n){function t(i){this.$container="string"==typeof i.container?a("#"+i.container):i.container,this.$pager="string"==typeof i.container?a("#"+i.pager):i.pager,this.swipeOptions=i.swipeOptions,this._init()}var a=i("zepto"),s=i("common/swipe/swipe");t.prototype={_init:function(){this._initSwipe()},_initSwipe:function(){var i=this,e=a.extend({startSlide:0,auto:2500,continuous:!0,disableScroll:!1,stopPropagation:!0,callback:function(){},transitionEnd:function(e){i._changePager(e)}},i.swipeOptions);i.swipe=s(i.$container[0],e),i._initPager(i.swipe.getNumSlides()),i._changePager(e.startSlide||0)},_initPager:function(i){var e=this,n=e.$pager.find("span"),t=1,a=e.sLen=i;for(n.html('<a href="javascript:;" class="sel"></a>'),t;a>t;t++)n.append('<a href="javascript:;" class="nosel"></a>')},_changePager:function(i){var e=this,n=(e.$pager,e.$pager.find("span")),t=e.sLen;if(n.children("a").attr("class","nosel"),2==t&&i>1)switch(i){case 2:n.children("a").eq(0).attr("class","sel");break;case 3:n.children("a").eq(1).attr("class","sel")}else n.children("a").eq(i).attr("class","sel")}},n.exports=t});
;define("common/cart-ani/index",function(t,e,o){function i(t,e){this.$cart=n(e),this.$img=n(t)}var n=t("zepto");i.prototype={fly:function(t){var e=this.$img,o=this.$cart,i=n(document.createElement("div")),f=e.clone(),s=o.width(),h=o.height();i.on("touchstart",function(t){t.preventDefault(),t.stopPropagation()}),i.offset({top:e.offset().top,left:e.offset().left}).css({opacity:"1",position:"absolute",height:e.height(),width:e.width(),"z-index":"10000"}).append(f.css({position:"absolute",width:"100%",height:"100%"})).appendTo(n("body")),i.animate({top:o.offset().top+(h-10)/2,left:o.offset().left+(s-10)/2,width:"20px",height:"20px"},800,"ease-in-out",function(){i.remove(),t&&t()})}},o.exports=i});
;define("common/gotop/index",function(require,exports,module){function _onscroll(){var o=win.scrollY;o/winHei>=1.5?($gotop||($body.append($(tmpl)),$gotop=$("#J-gotop"),$gotop.on("click",function(){win.scroll(0,0),hidden()})),show()):isShow&&hidden()}function show(){isShow||(isShow=!0,$gotop.css("display","block").animate({opacity:1},1e3,"ease-in"))}function hidden(){isShow&&(isShow=!1,$gotop.animate({opacity:0},1e3,"ease-in",function(){$gotop.css("display","none")}))}var $gotop,$=require("zepto"),tmpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<i id="J-gotop" class="icon-gotop"></i>';return __p}(),win=window,$win=$(win),$body=$(document.body),winHei=$win.height(),isShow=!1;$win.on("scroll",_onscroll)});
;define("search-panel/index",function(n){function i(){l=!0,s.css("display","block")}function c(){l=!1,s.css("display","none")}var e=n("zepto"),o=e("#J-search-panel"),a=o.find('input[type="search"]'),s=o.find(".icon-clear"),l=!1,t=!1;a.val()&&i(),a.addClass("noOpt"),s.on("click",function(){a.val(""),c()}),a.on("focus",function(){t||(a.val("").removeClass("noOpt"),c(),t=!0)}),a.on("input",function(){if(a.val()){if(l)return;i()}else c()})});
;define("goods-list/index",function(require,exports,module){function init(){initCat(),addEvt(),initCart(),initImgLoader(),$("#banner")[0]&&new Swiper({container:"banner",pager:"bannerPager"})}function initCat(){var n=$("#J-cat-list");$("#J-cat-btn").on("touchstart",function(n){n.stopPropagation()}).on("click",function(){n.toggle()}),$(document.body).on("touchstart",function(){n.hide()}),n.on("touchstart",function(n){n.stopPropagation(),sessionStorage.clear()})}function addEvt(){$(".J-add-cart").on("click",addCart),window.addCart=addCart}function initCart(){(new Ajax).send({url:$("#J-ajaxurl-initCart").val()},function(n){var e=+n.number,r=$(".cart"),t=$(".cart > i");e>0&&(r.css("display","block"),t.text(e))})}function addCart(n){n.preventDefault(),n.stopPropagation();var e=$(n.target),r=e.attr("goods-id");(new Ajax).send({url:$("#J-ajaxurl-addCart").val(),type:"post",data:{goodsId:r}},function(){new CartAni(e.parent().parent().find(".img-wrap"),$(".cart")).fly(function(){initCart()})})}function initImgLoader(){window.onload=function(){function n(n,e){function r(){$(e).css("background-image","url("+n+")")}var t=new Image;return t.src=n,t.complete?void r():void(t.onload=function(){r()})}var e=$("[tjz-bgimg]");e.each(function(e,r){var t=$(r),a=t.attr("tjz-bgimg");a&&n(a,r)})}}var _=require("underscore"),$=require("zepto"),Util=require("common/util/index"),Ajax=require("common/ajax/index"),PageLoader=(require("common/config/index"),require("common/page-loader/index")),Bubble=require("common/bubble/bubble"),Timer=require("common/timer/timer"),FixTop=require("common/fix-top/index"),Swiper=require("common/swiper/index"),CartAni=require("common/cart-ani/index");require("common/gotop/index"),require("search-panel/index"),new PageLoader({container:"#J-goods-list",pageBegin:2,scrollKey:location.pathname+location.search,getHtml:function(pageNum,back){(new Ajax).send({url:$("#J-ajax-url").val(),data:{order:Util.getParam("order"),type:Util.getParam("type"),page:pageNum,key:decodeURIComponent(Util.getParam("key"))}},function(result){back&&back(function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+="",_.each(list,function(n){__p+='\r\n<div class="goods">\r\n	<a href="/mall/Goods/detail?goodsId='+(null==(__t=n.goodsId)?"":__t)+'">\r\n		',n.tagName&&(__p+='\r\n		<div class="tag-'+(null==(__t=n.tagColor)?"":__t)+'">'+(null==(__t=n.tagName)?"":__t)+"</div>\r\n		"),__p+='\r\n		<div class="img-wrap" style="background-image: url('+(null==(__t=n.imageUrl)?"":__t)+')"></div>\r\n		<div class="goods-title">'+(null==(__t=n.name)?"":__t)+'</div>\r\n		<div class="clearfix">\r\n			<div class="price-wrap">\r\n				<label class="price"><i>&yen;</i><b>'+(null==(__t=n.salePrice)?"":__t)+'</b></label>	\r\n				<del class="price price-market"><i>&yen;</i><b>'+(null==(__t=n.marketPrice)?"":__t)+'</b></del>	\r\n			</div>\r\n			<label onclick="addCart(event);" class="btn-sm J-add-cart" goods-id="'+(null==(__t=n.goodsId)?"":__t)+'"></label>\r\n		</div>\r\n	</a>\r\n</div>\r\n'}),__p+="";return __p}({list:result.goodsList}))})}}).loadEnd(function(){Bubble.show("亲，没有更多商品了~")}),$("[timer]").each(function(n,e){new Timer(e,function(n){var e=parseInt(n/3600,10),r=parseInt((n-3600*e)/60),t=n-3600*e-60*r,a=parseInt(e/24);return e-=24*a,(a?Timer.addZero(a)+"天":"")+Timer.addZero(e)+":"+Timer.addZero(r)+":"+Timer.addZero(t)}).start()}),new FixTop({el:".goods-order"}),init()});