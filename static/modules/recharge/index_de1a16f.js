define("recharge/index",function(e){function n(){t()}function t(){l.on("click",r),c("#J-cz-input").on("input",a)}function a(){var e=c(this),n=e.val(),t=n.match(/\d+/);t?(n=+t[0],e.val(0>=n?"":n)):e.val("")}function r(){var e=c("#J-cz-input").val();if(!e)return void s.show("请输入充值金额！");if(+e>99999)return void s.show("您的充值金额太大，充值金额不能超过5位数");var n=c(this),t=c("#J-pay-form"),a=n.attr("type");return v.val(a),(new u).send({url:t.attr("action"),data:t.serialize(),type:t.attr("method")},function(e){var n=e.orderId;if(n&&c("#J-order-id").val(n),e.wxPayParams||e.jsParams){if(m)return!1;m=!0,c(".J-pay-btn.btnl-wx").addClass("loading").text("正在努力加载，请稍候..."),o=e,i()}},function(e){var n=e.result.orderId;n&&c("#J-order-id").val(n)}),!1}function i(){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",d,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",d),document.attachEvent("onWeixinJSBridgeReady",d)):d()}function d(){WeixinJSBridge.invoke("getBrandWCPayRequest",JSON.parse(o.wxPayParams||o.jsParams),function(e){m=!1,c(".J-pay-btn.btnl-wx").removeClass("loading").text("微信安全支付"),WeixinJSBridge.log(e.err_msg),"get_brand_wcpay_request:ok"==e.err_msg?setTimeout(function(){location.href=o.wxPaySucUrl||o.url},500):"get_brand_wcpay_request:cancel"!=e.err_msg&&alert(e.err_code+" "+e.err_desc)})}var o,c=e("zepto"),u=e("common/ajax/index"),s=e("common/bubble/bubble"),l=c(".J-pay-btn"),v=c("#J-pay-type"),m=!1;n()});