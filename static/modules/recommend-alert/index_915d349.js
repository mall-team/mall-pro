define("recommend-alert/index",function(require,exports,module){function modify(n){Alert.show(modifyTmpl({noLimit:n}),!0,"recommend-alert");var e=$(".recommend-alert-content");e.find(".J-yes-btn").on("click",function(){confirm({phone:e.find(".J-phone").val(),noLimit:n})})}function confirm(n){return n.success&&(confirmBack=n.success),noLimit=n.noLimit,isShop=n.isShop,isShop&&(onlyClickHide=!0),n.result?void confirmAlert(n.result):void getRecommendInfo(n.phone,function(n){confirmAlert(n)})}function confirmAlert(n){Alert.show(confirmTmpl(n),!0,"recommend-alert");var e=$(".recommend-alert-content");e.find(".J-yes-btn").on("click",function(){onlyClickHide?(Alert.hide(),confirmBack&&confirmBack()):modifySubmit(e.find(".phone-label").text())}),e.find(".modify-link").on("click",modifyAgain)}function getRecommendInfo(n,e){return n?/^1[3-8]\d{9}$/.test(n)?void(new Ajax).send({url:"/User/Center/getNewServiceInfo",type:"post",data:{phone:n}},function(n){Alert.hide(),e&&e(n)},function(){}):void Bubble.show("请输入正确手机号码"):void Bubble.show("请输入手机号码")}function modifySubmit(n){(new Ajax).send({url:"/User/Center/changeMyService",type:"post",data:{phone:n,flag:noLimit?1:0}},function(){Alert.hide(),confirmBack&&confirmBack()})}function modifyAgain(){onlyClickHide=!1,Alert.hide(),modify(noLimit)}var confirmBack,noLimit,$=require("zepto"),Alert=require("common/alert/alert"),Ajax=require("common/ajax/index"),Bubble=require("common/bubble/bubble"),modifyTmpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div class="recommend-alert-content">\r\n	<p class="title">修改服务人</p>\r\n	',noLimit||(__p+='\r\n	<p class="tips">*每月只能修改一次哦</p>\r\n	'),__p+='\r\n	<div class="input-wrap">\r\n        <label>手机号</label>\r\n        <input class="J-phone" type="tel" name="phone" placeholder="请输入服务人手机号码" autocomplete="off">\r\n    </div>\r\n    <div class="btn-content">\r\n    	<button type="button" class="J-yes-btn btnl">确认</button>\r\n    </div>\r\n</div>';return __p},confirmTmpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="recommend-alert-content">\r\n	<p class="title">确认服务人</p>\r\n	<section class="userinfo">\r\n		<div class="img-wrap headimg" style="background-image:url('+(null==(__t=head_sculpture)?"":__t)+')"></div>\r\n		<p class="user-name">'+(null==(__t=nickname)?"":__t)+'</p>\r\n		<p class="phone-label">'+(null==(__t=cellphone)?"":__t)+'</p>\r\n	</section>\r\n    <div class="btn-content">\r\n    	<button type="button" class="J-yes-btn btnl">确认</button>\r\n    </div>\r\n    <div class="modify-wrap">\r\n    	<a class="modify-link">修改服务人手机号</a>\r\n    </div>\r\n</div>';return __p},isShop=!1,onlyClickHide=!1;module.exports={modify:modify,confirm:confirm}});