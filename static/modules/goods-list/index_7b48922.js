define("goods-list/index",function(require,exports,module){function init(){initCat(),addEvt(),initCart(),initImgLoader(),$("#banner")[0]&&new Swiper({container:"banner",pager:"bannerPager"})}function initCat(){var n=$("#J-cat-list");$("#J-cat-btn").on("touchstart",function(n){n.stopPropagation()}).on("click",function(){n.toggle()}),$(document.body).on("touchstart",function(){n.hide()}),n.on("touchstart",function(n){n.stopPropagation(),sessionStorage.clear()})}function addEvt(){$(".J-add-cart").on("click",addCart),window.addCart=addCart}function initCart(){(new Ajax).send({url:$("#J-ajaxurl-initCart").val()},function(n){var e=+n.number,r=$(".cart"),t=$(".cart > i");e>0&&(r.css("display","block"),t.text(e))})}function addCart(n){n.preventDefault(),n.stopPropagation();var e=$(n.target),r=e.attr("goods-id");(new Ajax).send({url:$("#J-ajaxurl-addCart").val(),type:"post",data:{goodsId:r}},function(){new CartAni(e.parent().parent().find(".img-wrap"),$(".cart")).fly(function(){initCart()})})}function initImgLoader(){window.onload=function(){function n(n,e){function r(){$(e).css("background-image","url("+n+")")}var t=new Image;return t.src=n,t.complete?void r():void(t.onload=function(){r()})}var e=$("[tjz-bgimg]");e.each(function(e,r){var t=$(r),a=t.attr("tjz-bgimg");a&&n(a,r)})}}var _=require("underscore"),$=require("zepto"),Util=require("common/util/index"),Ajax=require("common/ajax/index"),PageLoader=(require("common/config/index"),require("common/page-loader/index")),Bubble=require("common/bubble/bubble"),Timer=require("common/timer/timer"),FixTop=require("common/fix-top/index"),Swiper=require("common/swiper/index"),CartAni=require("common/cart-ani/index");require("common/gotop/index"),require("search-panel/index"),new PageLoader({container:"#J-goods-list",pageBegin:2,scrollKey:location.pathname+location.search,getHtml:function(pageNum,back){(new Ajax).send({url:$("#J-ajax-url").val(),data:{order:Util.getParam("order"),type:Util.getParam("type"),page:pageNum,key:decodeURIComponent(Util.getParam("key"))}},function(result){back&&back(function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+="",_.each(list,function(n){__p+='\r\n<div class="goods">\r\n	<a href="/mall/Goods/detail?goodsId='+(null==(__t=n.goodsId)?"":__t)+'">\r\n		',n.tagName&&(__p+='\r\n		<div class="tag-'+(null==(__t=n.tagColor)?"":__t)+'">'+(null==(__t=n.tagName)?"":__t)+"</div>\r\n		"),__p+='\r\n		<div class="img-wrap" style="background-image: url('+(null==(__t=n.imageUrl)?"":__t)+')"></div>\r\n		<div class="goods-title">'+(null==(__t=n.name)?"":__t)+'</div>\r\n		<div class="clearfix">\r\n			<div class="price-wrap">\r\n				<label class="price"><i>&yen;</i><b>'+(null==(__t=n.salePrice)?"":__t)+'</b></label>	\r\n				<del class="price price-market"><i>&yen;</i><b>'+(null==(__t=n.marketPrice)?"":__t)+'</b></del>	\r\n			</div>\r\n			<label onclick="addCart(event);" class="btn-sm J-add-cart" goods-id="'+(null==(__t=n.goodsId)?"":__t)+'"></label>\r\n		</div>\r\n	</a>\r\n</div>\r\n'}),__p+="";return __p}({list:result.goodsList}))})}}).loadEnd(function(){Bubble.show("亲，没有更多商品了~")}),$("[timer]").each(function(n,e){new Timer(e,function(n){var e=parseInt(n/3600,10),r=parseInt((n-3600*e)/60),t=n-3600*e-60*r,a=parseInt(e/24);return e-=24*a,(a?Timer.addZero(a)+"天":"")+Timer.addZero(e)+":"+Timer.addZero(r)+":"+Timer.addZero(t)}).start()}),new FixTop({el:".goods-order"}),init()});