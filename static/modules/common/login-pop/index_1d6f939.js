define("common/login-pop/index",function(require,exports,module){function show(n){Pop.show({content:_tmpl(),hasClose:!1,manualClose:n.manualClose}),init(n)}function init(n){options=n,Ajax=n.Ajax,$yzmBt=$("#J-yzm-bt"),$submitBt=$("#J-phone-ok"),$phone=$("#J-phone"),$code=$("#J-code"),$yzmBt.on("click",getCode),$submitBt.on("click",login)}function getCode(){function n(){setTimeout(function(){return o--,$yzmBt.text(o),0>=o?(disabled=!1,void $yzmBt.text("获取验证码").removeClass("disabled")):void n()},1e3)}if(disabled)return!1;var e=$phone.val(),o=60;return(new Ajax).send({url:"/WeChat/Band/sendMsg",data:{phone:e}},function(){disabled=!0,$yzmBt.text(o).addClass("disabled"),n()}),!1}function login(){function n(){(new Ajax).send({url:"/WeChat/Band/bandAccount",type:"post",data:e},function(){loagining=!1,Pop.hide(),options.loginSuc&&options.loginSuc()},function(){loagining=!1})}var e,o=$phone.val(),t=$code.val();return o?/^\d{11}$/.test(o)?t?loagining?!1:(e={phone:o,code:t},"object"==typeof phpdata&&$.each(["channelType","channelId"],function(n,o){phpdata[o]&&(e[o]=phpdata[o])}),loagining=!0,options.noSelRecommend?n():ConfirmService.start(o,t,Ajax,function(o){o&&(e.recommend=o),n()},function(){loagining=!1}),!1):(Bubble.show("请输入验证码"),!1):(Bubble.show("请输入正确的手机号码"),!1):(Bubble.show("请输入您的手机号码"),!1)}var Ajax,options,$yzmBt,$submitBt,$phone,$code,$=require("zepto"),Pop=require("common/pop/index"),Bubble=require("common/bubble/bubble"),ConfirmService=(require("common/alert/alert"),require("common/confirm-service/index")),_tmpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<section class="phone-panel">\r\n	<div class="input-wrap">\r\n		<label>手机号</label>\r\n		<input id="J-phone" type="tel" placeholder="请输入您的手机号码" />\r\n	</div>\r\n	<div class="yzm">\r\n		<div class="input-wrap">\r\n			<label>验证码</label>\r\n			<input id="J-code" type="tel" placeholder="输入验证码" />\r\n		</div>\r\n		<button style="vertical-align: top;" id="J-yzm-bt" type="button">获取验证码</button>\r\n	</div>\r\n	<div>\r\n		<button id="J-phone-ok" class="btnl btnl-wx">确认</button>\r\n	</div>\r\n</section>';return __p},disabled=!1,loagining=!1;module.exports={show:show,init:init}});