define("common/amount/index",function(t,e,i){function n(t){this.$el=s(t?t:".J-amount-bar"),this.$el.length>1&&(this.$el=s($el[0])),this.$minus=this.$el.find(".btn-minus"),this.$add=this.$el.find(".btn-add"),this.$val=this.$el.find(".amount-val"),this._timer=null}var a="click",s=t("zepto");n.prototype={resetBtn:function(){this._resetBtn()},init:function(t){var e=this;e.ajaxUpdate=t;var i=e.$el,n=e.$minus,s=e.$add,l=e.$val;e._resetBtn(),n.on(a,function(){var t=i.attr("min"),n=+l.text();return n-=1,null!==t&&+t>n?void 0:(l.text(n),e._resetBtn(),e._ajax(n),!1)}),s.on(a,function(){var t=i.attr("max"),n=+l.text();return n+=1,null!==t&&n>+t?void 0:(l.text(n),e._resetBtn(),e._ajax(n),!1)})},_ajax:function(t){var e=this,i=e.ajaxUpdate;i&&(e._timer&&clearTimeout(e._timer),e._timer=setTimeout(function(){i(t,e.$el)},500))},_resetBtn:function(){var t=this.$el,e=this.$minus,i=this.$add,n=this.$val,a=t.attr("min"),s=t.attr("max"),l=+n.text();null!=a&&a>=l?e.addClass("disabled"):e.removeClass("disabled"),null!=s&&l>=s?i.addClass("disabled"):i.removeClass("disabled")}},i.exports=n});