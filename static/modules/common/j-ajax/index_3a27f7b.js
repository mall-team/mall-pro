define("common/j-ajax/index",function(t,a,e){function n(t){t=t||{},r=t.validateFunc,o(".j-ajax").each(function(a,e){var n,f,u,d=o(e),s=o("#"+d.attr("form")),m=d.attr("alert"),x=d.attr("alert-to");d.on(i,function(a){if(r&&!r())return!1;d.trigger("disabled:click"),s.length>0?(n=s.attr("action"),f=s.attr("method"),u=s.serialize()):(n=d.attr("ajax-url"),f=d.attr("ajax-type")||"get",u=JSON.parse(d.attr("ajax-data")));var e={url:n,type:f,data:u,selfLoginSuc:t.selfLoginSuc};(new c).send(e,function(){m&&l.show({msg:m,type:"alert",yesBack:function(){x&&(location.href=x)}})},function(){d.trigger("disabled:ok")}),a.preventDefault()})})}var r,i="click",o=t("zepto"),c=t("common/ajax/index"),l=t("common/confirm/index");e.exports={init:n}});