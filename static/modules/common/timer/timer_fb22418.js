define("common/timer/timer",function(t,e,r){function i(t,e){this.$el=a(t),this.format=e;var r=+this.$el.attr("timer-end"),i="object"==typeof phpdata?phpdata.serverTime:null,o=+this.$el.attr("timer");r&&i?this.lastTime=r-i:(o||0==o)&&(this.lastTime=this.oTime=o),this.day=0,this.hour=0,this.min=0,this.sec=0,this._timer=null}var a=t("zepto");i.prototype={start:function(){var t=this;if(t.lastTime||0==t.lastTime)return t._walk(),t},end:function(t){return this._endBack=t,this},_walk:function(){var t=this;return t.$el.html(t._format(t.lastTime<0?0:t.lastTime)),t.lastTime<=0?void(this.oTime>0&&t._endBack&&t._endBack()):(t.lastTime--,void(t._timer=setTimeout(function(){t._walk()},1e3)))},_format:function(t){var e=this,r=parseInt(t/3600,10),i=parseInt((t-3600*r)/60),a=t-3600*r-60*i,o=parseInt(r/24);return r-=24*o,e.day=o,e.hour=r,e.min=i,e.sec=a,"function"==typeof e.format?e.format(t):"single"==e.format?o>0?e._addZero(o)+"天":r>0?e._addZero(r)+"小时":i>0?e._addZero(i)+"分钟":a>0?e._addZero(a)+"秒":"0秒":"time"==e.format?e._addZero(24*o+r)+":"+e._addZero(i)+":"+e._addZero(a):(o>0?e._addZero(o)+"天":"")+e._addZero(r)+"时"+e._addZero(i)+"分"+e._addZero(a)+"秒"},_addZero:function(t){return t.toString().length<2?"0"+t:t}},i.addZero=function(t){return t.toString().length<2?"0"+t:t},r.exports=i});