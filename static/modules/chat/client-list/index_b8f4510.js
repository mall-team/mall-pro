define("chat/client-list/index",function(require,exports,module){function init(){initPageLoader(),addEvent()}function addEvent(){$clientList.on("click",".J-contact-him",showPop)}function initPageLoader(){var curList,curPageNum=1;new PageLoader({container:$clientList,seeMore:".see-more",getHtml:function(pageNum,back){curPageNum=pageNum,(new Ajax).send({url:"/User/Customer/customerList",data:{type:listType,atten:atten,page:pageNum}},function(result){curList=result.list,back&&back(function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+="",$.each(list,function(t,n){__p+='\r\n<li>\r\n	<div class="img-content">\r\n		<div class="img-wrap" \r\n		',n.headimgurl&&(__p+='\r\n		style="background-image: url('+(null==(__t=n.headimgurl)?"":__t)+');"\r\n		'),__p+="\r\n		>\r\n		</div>\r\n		",1==n.newOne&&(__p+='\r\n		<i class="new"></i>\r\n		'),__p+='\r\n	</div>\r\n	<div class="info">\r\n		<p class="name"><span>'+(null==(__t=n.nickname)?"":__t)+'</span></p>\r\n		<p class="time">'+(null==(__t=n.remark)?"":__t)+'</p>\r\n	</div>\r\n	<div class="opt-wrap">\r\n		',__p+=1==n.canChat?'\r\n		<a chart-href="/User/Customer/single?touser='+(null==(__t=n.uid)?"":__t)+'" tel="'+(null==(__t=n.phone)?"":__t)+'" class="J-contact-him contact-btn">联系他</a>\r\n		':'\r\n		<a tel="'+(null==(__t=n.phone)?"":__t)+'" class="J-contact-him contact-btn disabled">联系他</a>\r\n		',__p+="\r\n	</div>\r\n</li>\r\n"}),__p+="";return __p}({list:curList,pageNum:pageNum}),+$(".atten-nav .active .amount").text())})}}).loadFirst().loadEnd(function(){1==curPageNum&&0==curList.length&&$clientList.html('<li class="nodata">暂无客户</li>')})}function showPop(){var $cur=$(this),tel=$cur.attr("tel"),chartHref=$cur.attr("chart-href");if(2==listType)return void(location.href=chartHref);var _tmpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="contact-panel">\r\n	<div class="title">联系方式</div>\r\n	<div class="btn-wrap">\r\n		',chartHref&&(__p+='\r\n		<a href="'+(null==(__t=chartHref)?"":__t)+'" class="J-chat-chat btnl btnl-wx">聊一聊</a>\r\n		'),__p+='\r\n		<a href="tel:'+(null==(__t=tel)?"":__t)+'" class="btnl btnl-default">打电话</a>\r\n		<a href="sms:'+(null==(__t=tel)?"":__t)+'" class="btnl btnl-default">发短信</a>\r\n	</div>\r\n</div>';return __p};Pop.show({autoY:!0,content:_tmpl({chartHref:chartHref,tel:tel})})}var $=require("zepto"),Ajax=require("common/ajax/index"),PageLoader=require("common/page-loader/index"),Util=(require("common/bubble/bubble"),require("common/util/index")),Pop=require("common/pop/index"),listType=Util.getParam("type")||0,atten=Util.getParam("atten")||0,$clientList=$(".client-list");init()});