define("game-ny/index/index",function(require,exports,module){function init(){addEvent(),isOver()}function addEvent(){$(document).on("click","#J-rule-btn",showRule),$(document).on("click","#J-send-wish",sendWish),$(document).on("click","#J-weal-btn",getWeal),new Guide("#J-invite-btn")}function showRule(e){e.preventDefault(),Alert.show(function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div class="rule-panel">\r\n	<h3>活动规则</h3>\r\n	<ol>\r\n		<li>每人只能领取一次福利，也只能送出一次祝福；</li>\r\n		<li>福利有限，先到先得，发完即止；</li>\r\n		<li>24：00～8：00点不发放福利，顺延到第二天早上陆续发放；</li>\r\n		<li>存在1%几率因账号异常原因导致福利发放失败，不予补发；</li>\r\n		<li>活动绝对真实，活动解释权归淘金子</li>\r\n	</ol>\r\n</div>';return __p}(),!0,"rule-alert")}function getWeal(){checkIsAtten()&&(location.href="/Activity/NewYearWish/index")}function sendWish(){if(checkIsAtten()){var i=$(this);(new Ajax).send({url:"/Activity/NewYearWish/wish",data:{toOpenId:$("#J-to-id").val()}},function(e){Confirm.show({msg:e.msg||"祝福成功送出！",type:"alert"}),i.attr("id","J-weal-btn").find("span").text("我也要领福利")})}}function checkIsAtten(){var i=1==$("#J-is-atten").val();return i||alertQrcode(),i}function alertQrcode(){(new Ajax).send({url:"/Activity/NewYearWish/getQRCode",data:{toOpenId:$("#J-to-id").val()}},function(result){Alert.show(function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="remind-panel">\r\n	<h3>淘金子粉丝专享新年福利</h3>\r\n	<div class="img-erwei">\r\n		<img src="'+(null==(__t=qrcode)?"":__t)+'" />\r\n		<div class="logo"><img src="http://cdn0.taojinzi.com/static/images/logo_2a50656.png" /></div>\r\n	</div>\r\n	<p class="tip">扫码关注，参与活动</p>\r\n</div>';return __p}({qrcode:result.url}),!0,"remind-alert")})}function isOver(){1==$("#J-is-over").val()&&Alert.show(function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div class="remind-panel">\r\n	<h3>活动已结束</h3>\r\n	<p class="pre-tip">关注淘金子商城获得更多惊喜</p>\r\n	<div class="img-erwei">\r\n		<img src="http://cdn0.taojinzi.com/static/images/erwei_51bd0ae.png" />\r\n		<div class="logo"><img src="http://cdn0.taojinzi.com/static/images/logo_2a50656.png" /></div>\r\n	</div>\r\n	<p class="tip">长按二维码，扫描关注</p>\r\n</div>';return __p}(),!1,"remind-alert")}var $=require("zepto"),Ajax=require("common/ajax/index"),Alert=require("common/alert/alert"),Guide=require("common/guide/guide"),Confirm=require("common/confirm/index");init()});