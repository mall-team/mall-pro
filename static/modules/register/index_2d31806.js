define("register/index",function(e){function t(){function e(){(new i).send({url:u.attr("action"),data:u.serialize(),type:u.attr("method"),selfSucBack:!0},function(e,t){var n=t.url,r=t.msg,i=e.jump,a=window.location;"parent"==i&&(a=parent.location),r?(o.show(r),n&&setTimeout(function(){a.href=n},3e3)):n&&(a.href=n),n||parent.Alert.hide()},function(e){1001==e.code&&(e.msg&&o.show(e.msg),parent.Alert.hide(),parent.setPhone(t))})}var t=d.val(),n=f.val(),l=c.val();if(d.length>0&&!t)return o.show("请输入您的手机号码"),!1;if(d.length>0&&!/^\d{11}$/.test(t))return o.show("请输入正确的手机号码"),!1;if(f.length>0&&!n)return o.show("请输入您的密码"),!1;if(c.length>0&&!l)return o.show("请输入验证码"),!1;if(d.length>0&&d.get(0).blur(),c.length>0&&c.get(0).blur(),f.length>0&&f.get(0).blur(),"1"==r(document.body).attr("register")){if(!n)return o.show("请输入密码"),!1;if(n.length<6)return o.show("密码长度最小6位"),!1;a.start(t,l,i,function(t){t&&r("#J-recommend").val(t),e()})}else e();return!1}function n(){function e(){setTimeout(function(){return n--,s.text(n),0>=n?(h=!1,void s.text("获取验证码").removeClass("disabled")):void e()},1e3)}if(h)return!1;var t=d.val(),n=60;return(new i).send({url:"/WeChat/Band/sendMsg",data:{phone:t}},function(){h=!0,s.text(n).addClass("disabled"),e()}),!1}var r=e("zepto"),o=parent.Bubble,i=e("common/ajax/index"),a=e("common/confirm-service/index"),u=r("#J-form"),l=r("#J-submit-btn"),s=r("#J-yzm-btn"),d=r("#J-phone"),c=r("#J-code"),f=r("#J-pwd"),h=!1;l.on("click",t),s.on("click",n)});