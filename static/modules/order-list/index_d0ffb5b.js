define("order-list/index",function(require,exports,module){function renderTimer(r){r.each(function(r,e){new Timer($(e),function(r){var e=parseInt(r/60,10),n=r-60*e;return Timer.addZero(e)+":"+Timer.addZero(n)}).start()})}var $=require("zepto"),Timer=require("common/timer/timer"),Ajax=require("common/ajax/index"),PageLoader=require("common/page-loader/index"),Bubble=require("common/bubble/bubble");renderTimer($("[timer]"));var ajaxUrl,itemLink,orderType=$("body").attr("order-type"),orderTypeDes="";switch(orderType){case"pay-wait":orderTypeDes="待支付";break;case"sign-wait":orderTypeDes="待收货";break;case"complete":orderTypeDes="已完成"}ajaxUrl=$("#J-ajaxurl-list").val(),itemLink=$("#J-detail-prefix").val(),new PageLoader({container:".order-list",pageBegin:2,getHtml:function(pageNum,back){(new Ajax).send({url:ajaxUrl,data:{page:pageNum}},function(result){back&&back(function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+="",$.each(list,function(r,e){__p+='\r\n<li class="order-item">\r\n	<a href="'+(null==(__t=itemLink+e.orderId)?"":__t)+'">\r\n		<p class="top-info clearfix">\r\n			<span class="date"><label>下单时间:</label><b>'+(null==(__t=e.ctime)?"":__t)+"</b></span>\r\n			",__p+="2"==e.orderState?'\r\n			<span class="state cancel right">'+(null==(__t=e.orderStateDesc)?"":__t)+"</span>\r\n			":'\r\n			<span class="state right">'+(null==(__t=orderTypeDes)?"":__t)+"</span>\r\n			",__p+='\r\n		</p>\r\n		<div class="order-info dib-wrap">\r\n			<div class="img-wrap dib" style="background-image: url('+(null==(__t=e.showImageUrl)?"":__t)+')"></div>\r\n			<dl class="dib clearfix">\r\n				<dt>订单编号</dt>\r\n				<dd>'+(null==(__t=e.orderId)?"":__t)+'</dd>\r\n				<dt>订单金额</dt>\r\n				<dd><span class="price"><i>&yen;</i><b>'+(null==(__t=e.orderAmount)?"":__t)+"</b></span></dd>\r\n				<dt>商品件数</dt>\r\n				<dd>"+(null==(__t=e.goodsNumber)?"":__t)+'</dd>\r\n			</dl>\r\n			<i class="icon-arrow"></i>\r\n		</div>\r\n		',"pay-wait"==orderType&&(__p+='\r\n		<div class="btn-wrap">\r\n			<button class="btnl">支付<span class="J-timer-'+(null==(__t=pageNum)?"":__t)+'" timer="'+(null==(__t=e.leftTime)?"":__t)+'"></span></button>\r\n		</div\r\n		'),__p+="\r\n	</a>\r\n</li>\r\n"}),__p+="";return __p}({list:result.orderList,pageNum:pageNum})),"pay-wait"==orderType&&renderTimer($(".J-timer-"+pageNum))})}}).loadEnd(function(){Bubble.show("亲，没有更多订单了~")})});