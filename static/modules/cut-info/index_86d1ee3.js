define("cut-info/index",function(require,exports,module){function Tab(e){var r=this.$el=$(e);this.order=0,this.$navs=r.find(".tab-nav").children(),this.$items=r.find(".tab-content").children(),this._init()}function cut(){var e=$("form"),r=e.attr("action"),i=e.serialize();(new Ajax).send({url:r,data:i,type:"post",selfSucBack:!0,selfLoginSuc:function(){location.reload()}},function(e,r){var i=Config.cutArr[Util.random(0,11)-1];Confirm.show({msg:i.replace("$0",'<b style="color: #ea0079;">'+e.price+"</b>"),type:"alert",yesBack:function(){"undefined"!=typeof phpdata&&phpdata.redPackage?showRedPacket(function(){location.href=r.url}):location.href=r.url}})})}function showRedPacket(closeBack){var tmpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="red-packet-panel">\r\n	<div class="packet-inner">\r\n		<div class="packet-close"></div>\r\n		<section class="info-section">\r\n			<div class="img-wrap head-img" \r\n			',isTjz||(__p+='\r\n			style="background-image: url('+(null==(__t=ownerHead)?"":__t)+')"\r\n			'),__p+='\r\n			></div>\r\n			<p class="user-name">'+(null==(__t=isTjz?"淘金子商城":ownerName)?"":__t)+'</p>\r\n			<p class="des">给你发了一个惊喜礼包</p>\r\n			<p class="thanks">'+(null==(__t=isTjz?"感谢亲对淘金子的支持！":"谢谢帮砍！")?"":__t)+'</p>\r\n			<div class="img-erwei">\r\n				<img src="'+(null==(__t=qrCode)?"":__t)+'" />\r\n				<!-- <div class="logo"><img src="/static/images/logo.png" /></div> -->\r\n			</div>\r\n			<div class="tip-content">\r\n				<p class="tip">扫描关注领惊喜礼包</p>\r\n				<ul>\r\n					<li>1、长按上述二维码关注公众账号</li>\r\n					<li>2、关注后即可收到惊喜礼包</li>\r\n				</ul>\r\n			</div>\r\n		</section>\r\n	</div>\r\n</div>';return __p};phpdata.isTjz=!phpdata.ownerHead&&!phpdata.ownerName,Alert.show(tmpl(phpdata),!1,"alert-red-packet"),$(".packet-close").on("click",function(){Alert.hide(),closeBack&&closeBack()})}var TAP_EVENT="click",$=require("zepto"),PageLoader=require("common/page-loader/index");require("common/j-ajax/index").init();var Util=require("common/util/index");require("common/ad-layer/index"),Tab.prototype={_init:function(){var e=this,r=Util.getParam("rankType")||0;e._toActive(e.$navs.get(r)),e.$navs.on("click",function(r){e._toActive($(r.target))})},_toActive:function(e){e=$(e);var r=this,i=r._getOrder(e,r.$navs),n=$(r.$items[i]);r.order=i,r.$navs.removeClass("active"),e.addClass("active"),r.$items.css("display","none"),n.css("display","block")},_getOrder:function(e,r){for(var i=0,n=r.length,t=e[0];n>i;i++)if(r[i]==t)return i}},new Tab("#J-tab");var Guide=require("common/guide/guide"),Timer=require("common/timer/timer");"undefined"==typeof taojinzi?(new Guide("#J-invite"),$("[invite]").each(function(e,r){new Guide(r)})):$("#J-invite").add($("[invite]")).on("click",function(){taojinzi.share(JSON.stringify({title:title,link:link,imgUrl:imgUrl,desc:desc}))}),new Timer("#J-timer").start().end(function(){location.reload()});var bodyTo,Confirm=require("common/confirm/index"),$body=$(document.body),bodyMsg=$body.attr("alert");bodyMsg&&(bodyTo=$body.attr("alert-to"),Confirm.show({type:"alert",msg:bodyMsg,yesBack:function(){bodyTo&&(location.href=bodyTo)}}));var Ajax=require("common/ajax/index"),Bubble=require("common/bubble/bubble"),Util=require("common/util/index"),Config=require("common/config/index"),Confirm=require("common/confirm/index"),Alert=require("common/alert/alert");$("#J-help-cut").on(TAP_EVENT,function(e){e.preventDefault(),cut()}),$("#J-cut").on(TAP_EVENT,function(e){e.preventDefault(),cut()}),$("[bubble]").each(function(e,r){var i=$(r),n=i.attr("bubble");n&&i.on(TAP_EVENT,function(){Bubble.show(n)})});var $recordList=$(".record-list"),$more=$(".see-more"),$load=$(".J-more-loading"),_tmplArr={tmpl0:function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+="",$.each(list,function(e,r){__p+='\r\n<div class="record-item dib-wrap">\r\n	<a href="/Mall/Haggle/showHaggle?haggleId='+(null==(__t=params.activeId)?"":__t)+"&cutId="+(null==(__t=r.id)?"":__t)+'&rankType=1">\r\n		<div class="img-wrap dib" style="background-image: url('+(null==(__t=r.head_sculpture)?"":__t)+')"></div>\r\n		<div class="record-m dib">\r\n			<div class="record-user">'+(null==(__t=r.customer_nickname)?"":__t)+'</div>\r\n			<div class="record-date">'+(null==(__t=r.update_time)?"":__t)+'</div>\r\n		</div>\r\n		<div class="record-price dib"><label>砍至</label><small>¥</small>'+(null==(__t=r.current_price)?"":__t)+"</div>\r\n	</a>\r\n</div>\r\n"}),__p+="";return __p},tmpl1:function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+="",$.each(list,function(e,r){__p+='\r\n<div class="record-item dib-wrap">\r\n	<div class="img-wrap dib" style="background-image: url('+(null==(__t=r.head_sculpture)?"":__t)+')"></div>\r\n	<div class="record-m dib">\r\n		<div class="record-user">'+(null==(__t=r.customer_nickname)?"":__t)+'<span class="record-date">'+(null==(__t=r.create_time)?"":__t)+'</span></div>\r\n		<div class="record-des">'+(null==(__t=r.des)?"":__t)+'</div>\r\n	</div>\r\n	<div class="record-price dib"><i>-</i><small>¥</small>'+(null==(__t=r.haggle_price)?"":__t)+"</div>\r\n</div>\r\n"}),__p+="";return __p}};$recordList.each(function(e){var r,i={};switch(e){case 0:r="/Mall/Haggle/haggleSortByPrice";break;case 1:r="/Mall/Haggle/haggleSortForOwnerId"}i.activeId=Util.getParam("haggleId"),i.ownerId=Util.getParam("ownerId"),new PageLoader({container:$recordList[e],seeMore:$more[e],pageBegin:2,loading:$load[e],getHtml:function(n,t){i.page=n,(new Ajax).send({url:r,data:i},function(r){t&&t(_tmplArr["tmpl"+e]({list:r,params:i}))})}}).loadEnd(function(){$($more[e]).remove()})})});